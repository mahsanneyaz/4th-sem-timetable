<!DOCTYPE html>
<html lang="en" data-color-scheme="dark">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Timetable - SRM University (BCA 4th Sem)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* CSS Variables for consistent theming and styling */
        :root {
            /* Color Tokens */
            --color-white: #fff;
            --color-black: #000;
            --color-cream-50: #fcfcf9;
            --color-cream-100: #fffffd;
            --color-gray-200: #f5f5f5;
            --color-gray-300: #a7a9a9;
            --color-gray-400: #777c7c;
            --color-slate-500: #626c71;
            --color-brown-600: #5e5240;
            --color-charcoal-700: #1f2121;
            --color-charcoal-800: #262828;
            --color-slate-900: #13343b;
            --color-teal-300: #32b8c6;
            --color-teal-400: #2da6b2;
            --color-teal-500: #21808d;
            --color-teal-600: #1d7480;
            --color-teal-700: #1a6873;
            --color-teal-800: #2996a1;
            --color-red-400: #ff5459;
            --color-red-500: #c0152f;
            --color-orange-400: #e68161;
            --color-orange-500: #a84b2f;
            --color-blue-400: #60a5fa;
            --color-blue-500: #0062ff;
            --color-green-400: #4ade80;
            --color-green-500: #00c548;

            /* Light Mode */
            --color-background: var(--color-cream-50);
            --color-surface: var(--color-cream-100);
            --color-text: var(--color-slate-900);
            --color-text-secondary: var(--color-slate-500);
            --color-primary: var(--color-teal-500);
            --color-primary-hover: var(--color-teal-600);
            --color-primary-active: var(--color-teal-700);
            --color-secondary: rgba(94, 82, 64, 0.12);
            --color-secondary-hover: rgba(94, 82, 64, 0.2);
            --color-secondary-active: rgba(94, 82, 64, 0.25);
            --color-border: rgba(94, 82, 64, 0.2);
            --color-btn-primary-text: var(--color-cream-50);
            --color-card-border: rgba(94, 82, 64, 0.12);
            --color-card-border-inner: rgba(94, 82, 64, 0.12);
            --color-error: var(--color-red-500);
            --color-success: var(--color-teal-500);
            --color-warning: var(--color-orange-500);
            --color-info: var(--color-slate-500);
            --color-focus-ring: rgba(33, 128, 141, 0.4);
            --color-select-caret: rgba(19, 52, 59, 0.8);
            --color-exam: var(--color-blue-500);
            --color-assignment: var(--color-green-500);
            --background-plus-fill: "%23262828";
            --color-primary-rgb: 33, 128, 141;

            /* Dark Mode */
            --dark-color-background: var(--color-charcoal-700);
            --dark-color-surface: var(--color-charcoal-800);
            --dark-color-text: var(--color-gray-200);
            --dark-color-text-secondary: rgba(167, 169, 169, 0.7);
            --dark-color-primary: var(--color-teal-300);
            --dark-color-primary-hover: var(--color-teal-400);
            --dark-color-primary-active: var(--color-teal-800);
            --dark-color-secondary: rgba(119, 124, 124, 0.15);
            --dark-color-secondary-hover: rgba(119, 124, 124, 0.25);
            --dark-color-secondary-active: rgba(119, 124, 124, 0.3);
            --dark-color-border: rgba(119, 124, 124, 0.3);
            --dark-color-error: var(--color-red-500);
            --dark-color-success: var(--color-teal-300);
            --dark-color-warning: var(--color-orange-400);
            --dark-color-info: var(--color-gray-300);
            --dark-color-focus-ring: rgba(50, 184, 198, 0.4);
            --dark-color-btn-primary-text: var(--color-slate-900);
            --dark-color-card-border: var(--dark-color-card-border);
            --dark-color-card-border-inner: var(--dark-color-card-border-inner);
            --dark-color-select-caret: rgba(245, 245, 245, 0.8);
            --dark-color-exam: var(--color-blue-500);
            --dark-color-assignment: var(--color-green-500);
            --dark-color-primary-rgb: 50, 184, 198;

            /* Typography */
            --font-family-base: 'Inter', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            --font-size-xs: 13px;
            --font-size-sm: 12px;
            --font-size-base: 14px;
            --font-size-md: 14px;
            --font-size-lg: 16px;
            --font-size-xl: 18px;
            --font-size-2xl: 20px;
            --font-size-3xl: 24px;
            --font-size-4xl: 30px;
            --font-weight-normal: 400;
            --font-weight-medium: 500;
            --font-weight-semibold: 550;
            --font-weight-bold: 600;
            --line-height-tight: 1.2;
            --line-height-normal: 1.4;
            --letter-spacing-tight: -0.01em;

            /* Spacing */
            --space-0: 0;
            --space-1: 1px;
            --space-2: 2px;
            --space-4: 4px;
            --space-6: 6px;
            --space-8: 8px;
            --space-10: 10px;
            --space-12: 12px;
            --space-16: 16px;
            --space-20: 20px;
            --space-24: 24px;
            --space-32: 32px;

            /* Border Radius */
            --radius-sm: 6px;
            --radius-base: 8px;
            --radius-md: 10px;
            --radius-lg: 12px;
            --radius-full: 9999px;

            /* Shadows */
            --shadow-xs: 0 1px 2px rgba(0, 0, 0, 0.02);
            --shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.04), 0 1px 2px rgba(0, 0, 0, 0.02);
            --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.04), 0 2px 4px -1px rgba(0, 0, 0, 0.02);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.04), 0 4px 6px -2px rgba(0, 0, 0, 0.02);
            --shadow-inset-sm: inset 0 1px 0 rgba(255, 255, 255, 0.15), inset 0 -1px 0 rgba(0, 0, 0, 0.03);

            /* Animation */
            --duration-fast: 150ms;
            --duration-normal: 250ms;
            --duration-slow: 400ms;
            --ease-standard: cubic-bezier(0.16, 1, 0.3, 1);
            --ease-in-out: cubic-bezier(0.42, 0, 0.58, 1);

            /* Layout */
            --container-sm: 640px;
            --container-md: 768px;
            --container-lg: 1024px;
            --container-xl: 1280px;
        }

        [data-color-scheme="dark"] {
            --color-background: var(--dark-color-background);
            --color-surface: var(--dark-color-surface);
            --color-text: var(--dark-color-text);
            --color-text-secondary: var(--dark-color-text-secondary);
            --color-primary: var(--dark-color-primary);
            --color-primary-hover: var(--dark-color-primary-hover);
            --color-primary-active: var(--dark-color-primary-active);
            --color-secondary: var(--dark-color-secondary);
            --color-secondary-hover: var(--dark-color-secondary-hover);
            --color-secondary-active: var(--dark-color-secondary-active);
            --color-border: var(--dark-color-border);
            --color-error: var(--dark-color-error);
            --color-success: var(--dark-color-success);
            --color-warning: var(--dark-color-warning);
            --color-info: var(--dark-color-info);
            --color-focus-ring: var(--dark-color-focus-ring);
            --color-btn-primary-text: var(--dark-color-btn-primary-text);
            --dark-color-card-border: var(--dark-color-card-border);
            --dark-color-card-border-inner: var(--dark-color-card-border-inner);
            --color-select-caret: rgba(245, 245, 245, 0.8);
            --color-exam: var(--dark-color-exam);
            --color-assignment: var(--dark-color-assignment);
            --shadow-inset-sm: inset 0 1px 0 rgba(255, 255, 255, 0.1), inset 0 -1px 0 rgba(0, 0, 0, 0.15);
            --background-plus-fill: "%23a7a9a9";
            --color-primary-rgb: var(--dark-color-primary-rgb);
        }

        /* Base styles */
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: var(--font-family-base);
            font-size: var(--font-size-base);
            line-height: var(--line-height-normal);
            color: var(--color-text);
            background-color: var(--color-background);
            -webkit-font-smoothing: antialiased;
            transition: background-color var(--duration-normal), color var(--duration-normal);
            position: relative;
            overflow-x: hidden;
        }

        /* Animated Dot Background */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            /* New SVG with more random dots */
            background-image: url("data:image/svg+xml,%3Csvg width='400' height='400' viewBox='0 0 400 400' xmlns='http://www.w3.org/2000/svg'%3E%3Cstyle%3E%40keyframes blink%7B0%25%2C100%25%7Bopacity%3A0.2%3B%7D50%25%7Bopacity%3A0.8%3B%7D%7D.circle%7Banimation%3Ablink%204s%20infinite%20ease-in-out%3Bfill%3A%23a7a9a9%3B%7D%3C%2Fstyle%3E%3Ccircle%20class%3D'circle'%20cx%3D'32'%20cy%3D'45'%20r%3D'1.1'%20style%3D'animation-delay%3A0s%3B'%2F%3E%3Ccircle%20class%3D'circle'%20cx%3D'156'%20cy%3D'83'%20r%3D'0.7'%20style%3D'animation-delay%3A-0.5s%3B'%2F%3E%3Ccircle%20class%3D'circle'%20cx%3D'92'%20cy%3D'178'%20r%3D'1.4'%20style%3D'animation-delay%3A-1s%3B'%2F%3E%3Ccircle%20class%3D'circle'%20cx%3D'42'%20cy%3D'124'%20r%3D'0.8'%20style%3D'animation-delay%3A-1.5s%3B'%2F%3E%3Ccircle%20class%3D'circle'%20cx%3D'182'%20cy%3D'132'%20r%3D'1.0'%20style%3D'animation-delay%3A-2s%3B'%2F%3E%3Ccircle%20class%3D'circle'%20cx%3D'115'%20cy%3D'25'%20r%3D'0.6'%20style%3D'animation-delay%3A-2.5s%3B'%2F%3E%3Ccircle%20class%3D'circle'%20cx%3D'15'%20cy%3D'12'%20r%3D'0.9'%20style%3D'animation-delay%3A-3s%3B'%2F%3E%3Ccircle%20class%3D'circle'%20cx%3D'192'%20cy%3D'95'%20r%3D'1.2'%20style%3D'animation-delay%3A-3.5s%3B'%2F%3E%3Ccircle%20class%3D'circle'%20cx%3D'67'%20cy%3D'156'%20r%3D'1.3'%20style%3D'animation-delay%3A-0.2s%3B'%2F%3E%3Ccircle%20class%3D'circle'%20cx%3D'124'%20cy%3D'67'%20r%3D'0.5'%20style%3D'animation-delay%3A-1.2s%3B'%2F%3E%3Ccircle%20class%3D'circle'%20cx%3D'178'%20cy%3D'178'%20r%3D'0.9'%20style%3D'animation-delay%3A-2.2s%3B'%2F%3E%3Ccircle%20class%3D'circle'%20cx%3D'25'%20cy%3D'189'%20r%3D'1.1'%20style%3D'animation-delay%3A-3.2s%3B'%2F%3E%3Ccircle%20class%3D'circle'%20cx%3D'189'%20cy%3D'25'%20r%3D'0.7'%20style%3D'animation-delay%3A-0.7s%3B'%2F%3E%3Ccircle%20class%3D'circle'%20cx%3D'55'%20cy%3D'55'%20r%3D'1.0'%20style%3D'animation-delay%3A-1.7s%3B'%2F%3E%3Ccircle%20class%3D'circle'%20cx%3D'145'%20cy%3D'145'%20r%3D'0.8'%20style%3D'animation-delay%3A-2.7s%3B'%2F%3E%3Ccircle%20class%3D'circle'%20cx%3D'75'%20cy%3D'95'%20r%3D'1.2'%20style%3D'animation-delay%3A-3.7s%3B'%2F%3E%3Ccircle%20class%3D'circle'%20cx%3D'95'%20cy%3D'75'%20r%3D'0.6'%20style%3D'animation-delay%3A-0.9s%3B'%2F%3E%3Ccircle%20class%3D'circle'%20cx%3D'165'%20cy%3D'165'%20r%3D'1.3'%20style%3D'animation-delay%3A-1.9s%3B'%2F%3E%3Ccircle%20class%3D'circle'%20cx%3D'35'%20cy%3D'135'%20r%3D'0.9'%20style%3D'animation-delay%3A-2.9s%3B'%2F%3E%3Ccircle%20class%3D'circle'%20cx%3D'135'%20cy%3D'35'%20r%3D'1.1'%20style%3D'animation-delay%3A-3.9s%3B'%2F%3E%3Ccircle%20class%3D'circle'%20cx%3D'200'%20cy%3D'200'%20r%3D'0.8'%20style%3D'animation-delay%3A-0.3s%3B'%2F%3E%3Ccircle%20class%3D'circle'%20cx%3D'250'%20cy%3D'150'%20r%3D'1.0'%20style%3D'animation-delay%3A-1.3s%3B'%2F%3E%3Ccircle%20class%3D'circle'%20cx%3D'300'%20cy%3D'100'%20r%3D'1.2'%20style%3D'animation-delay%3A-2.3s%3B'%2F%3E%3Ccircle%20class%3D'circle'%20cx%3D'350'%20cy%3D'50'%20r%3D'0.7'%20style%3D'animation-delay%3A-3.3s%3B'%2F%3E%3Ccircle%20class%3D'circle'%20cx%3D'50'%20cy%3D'350'%20r%3D'1.1'%20style%3D'animation-delay%3A-0.8s%3B'%2F%3E%3Ccircle%20class%3D'circle'%20cx%3D'100'%20cy%3D'300'%20r%3D'0.9'%20style%3D'animation-delay%3A-1.8s%3B'%2F%3E%3Ccircle%20class%3D'circle'%20cx%3D'150'%20cy%3D'250'%20r%3D'1.3'%20style%3D'animation-delay%3A-2.8s%3B'%2F%3E%3Ccircle%20class%3D'circle'%20cx%3D'200'%20cy%3D'200'%20r%3D'0.6'%20style%3D'animation-delay%3A-3.8s%3B'%2F%3E%3Ccircle%20class%3D'circle'%20cx%3D'250'%20cy%3D'350'%20r%3D'1.0'%20style%3D'animation-delay%3A-0.4s%3B'%2F%3E%3Ccircle%20class%3D'circle'%20cx%3D'300'%20cy%3D'300'%20r%3D'1.2'%20style%3D'animation-delay%3A-1.4s%3B'%2F%3E%3Ccircle%20class%3D'circle'%20cx%3D'350'%20cy%3D'250'%20r%3D'0.8'%20style%3D'animation-delay%3A-2.4s%3B'%2F%3E%3Ccircle%20class%3D'circle'%20cx%3D'50'%20cy%3D'50'%20r%3D'1.1'%20style%3D'animation-delay%3A-3.4s%3B'%2F%3E%3Ccircle%20class%3D'circle'%20cx%3D'100'%20cy%3D'100'%20r%3D'0.7'%20style%3D'animation-delay%3A-0.6s%3B'%2F%3E%3Ccircle%20class%3D'circle'%20cx%3D'150'%20cy%3D'150'%20r%3D'1.3'%20style%3D'animation-delay%3A-1.6s%3B'%2F%3E%3Ccircle%20class%3D'circle'%20cx%3D'200'%20cy%3D'200'%20r%3D'0.9'%20style%3D'animation-delay%3A-2.6s%3B'%2F%3E%3Ccircle%20class%3D'circle'%20cx%3D'250'%20cy%3D'250'%20r%3D'1.0'%20style%3D'animation-delay%3A-3.6s%3B'%2F%3E%3Ccircle%20class%3D'circle'%20cx%3D'300'%20cy%3D'300'%20r%3D'0.8'%20style%3D'animation-delay%3A-0.1s%3B'%2F%3E%3Ccircle%20class%3D'circle'%20cx%3D'350'%20cy%3D'350'%20r%3D'1.2'%20style%3D'animation-delay%3A-1.1s%3B'%2F%3E%3C%2Fsvg%3E");
            opacity: 0.8;
            animation: subtleDrift 60s linear infinite;
        }

        @keyframes subtleDrift {
            from {
                background-position: 0 0;
            }

            to {
                background-position: 400px 400px;
            }
        }

        .app-container {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* Header */
        .header {
            position: sticky;
            top: 0;
            z-index: 1000;
            background-color: rgba(var(--color-surface-rgb), 0.8);
            backdrop-filter: blur(8px);
            -webkit-backdrop-filter: blur(8px);
            border-bottom: 1px solid var(--color-border);
            padding: var(--space-12) 0;
            animation: fadeInSlideDown 0.6s var(--ease-in-out) both;
        }

        .header-content {
            max-width: var(--container-xl);
            margin: 0 auto;
            padding: 0 var(--space-16);
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: var(--space-20);
        }

        .university-info {
            display: flex;
            flex-direction: column;
            align-items: flex-start;
            flex-shrink: 1;
            min-width: 0;
        }

        .university-name {
            font-size: var(--font-size-2xl);
            font-weight: var(--font-weight-bold);
            color: var(--color-primary);
            margin: 0;
            line-height: 1.2;
        }

        .program-details {
            display: flex;
            align-items: center;
            flex-wrap: wrap;
            gap: var(--space-8);
            font-size: var(--font-size-sm);
            color: var(--color-text-secondary);
            margin-top: var(--space-4);
        }

        .header-controls {
            display: flex;
            align-items: center;
            gap: var(--space-20);
            flex-shrink: 0;
        }

        .header-icons {
            display: flex;
            align-items: center;
            gap: var(--space-12);
        }

        .theme-toggle {
            display: flex;
            align-items: center;
            justify-content: center;
            background: transparent;
            border: none;
            cursor: pointer;
            padding: var(--space-4);
            color: var(--color-text);
            border-radius: var(--radius-sm);
            position: relative;
            overflow: hidden;
            transition: background-color var(--duration-fast), transform var(--duration-fast) var(--ease-standard);
        }

        .theme-toggle:hover {
            background-color: var(--color-secondary-hover);
            transform: scale(1.1) rotate(15deg) translateY(-2px);
        }

        .theme-toggle:active {
            transform: scale(0.95) rotate(5deg) translateY(0);
        }

        .theme-toggle svg {
            width: 24px;
            height: 24px;
            transition: transform 0.5s var(--ease-standard);
        }

        .theme-toggle .sun-icon {
            transform: scale(1) rotate(0deg);
        }

        .theme-toggle .moon-icon {
            transform: scale(0) rotate(-90deg);
            position: absolute;
        }

        [data-color-scheme="dark"] .theme-toggle .sun-icon {
            transform: scale(0) rotate(90deg);
        }

        [data-color-scheme="dark"] .theme-toggle .moon-icon {
            transform: scale(1) rotate(0deg);
        }

        .current-time {
            text-align: right;
            cursor: pointer;
            padding: var(--space-4) var(--space-8);
            border-radius: var(--radius-sm);
            transition: background-color var(--duration-fast), transform var(--duration-fast) var(--ease-standard);
        }

        .current-time:hover {
            background-color: var(--color-secondary);
            transform: translateY(-2px) scale(1.02);
        }

        .current-time:active {
            transform: translateY(0) scale(1);
        }

        .time-display {
            font-size: var(--font-size-xl);
            font-weight: var(--font-weight-semibold);
            color: var(--color-primary);
        }

        .date-display {
            font-size: var(--font-size-sm);
            color: var(--color-text-secondary);
            margin-top: var(--space-2);
        }

        .time-seconds {
            font-size: 0.7em;
            font-weight: var(--font-weight-normal);
            color: var(--color-text-secondary);
        }

        /* Main Content */
        .main-content {
            flex: 1;
            padding: var(--space-32) 0;
        }

        .timetable-container {
            max-width: var(--container-xl);
            margin: 0 auto;
            padding: 0 var(--space-16);
            animation: fadeInSlideUp 0.6s 0.2s var(--ease-in-out) both;
        }

        .timetable-header {
            text-align: center;
            margin-bottom: var(--space-24);
        }

        .timetable-header h2 {
            font-size: var(--font-size-3xl);
            color: var(--color-text);
        }

        .teacher-info {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: var(--space-8);
            font-size: var(--font-size-sm);
            color: var(--color-text-secondary);
            flex-wrap: wrap;
            margin-top: var(--space-16);
        }

        /* Brighter links in timetable header for visibility */
        .teacher-info .footer-link,
        .teacher-info .separator {
            color: var(--color-text);
            transition: color var(--duration-fast);
        }

        .teacher-info .footer-link:hover {
            color: var(--color-primary);
        }

        .separator {
            color: var(--color-text-secondary);
        }

        .timetable-main-area {
            display: flex;
            flex-direction: column;
            gap: var(--space-24);
            align-items: center;
        }

        /* Timetable Grid */
        .timetable-grid {
            width: 100%;
            display: grid;
            grid-template-columns: minmax(80px, auto) repeat(5, 1fr);
            gap: var(--space-2);
            background-color: var(--color-surface);
            border-radius: var(--radius-lg);
            padding: var(--space-16);
            box-shadow: var(--shadow-md);
            border: 1px solid var(--color-border);
            overflow-x: auto;
        }

        .grid-header,
        .grid-time {
            padding: var(--space-12);
            text-align: center;
            font-weight: var(--font-weight-semibold);
            border-radius: var(--radius-sm);
            font-size: var(--font-size-sm);
            color: var(--color-text);
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: var(--color-secondary);
        }

        .grid-time {
            font-weight: var(--font-weight-medium);
            font-size: var(--font-size-xs);
        }

        .grid-cell {
            background-color: var(--color-secondary);
            padding: var(--space-8);
            border-radius: var(--radius-sm);
            transition: all var(--duration-normal) var(--ease-standard);
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            font-size: var(--font-size-xs);
            font-weight: var(--font-weight-medium);
            min-height: 48px;
            border: 1px solid transparent;
            cursor: pointer;
            opacity: 0;
            transform: translateY(10px);
            animation: fadeInSlideUp var(--duration-slow) var(--ease-in-out) forwards;
            animation-delay: var(--cell-delay, 0s);
        }

        .grid-cell:not(.lunch):not(.free):hover {
            transform: translateY(-4px) scale(1.03);
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.1);
            border-color: var(--color-primary);
            background-color: var(--color-secondary-hover);
        }

        .grid-cell:not(.lunch):not(.free):active {
            transform: translateY(0) scale(0.98);
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .grid-cell.subject {
            background-color: rgba(var(--color-primary-rgb), 0.15);
            color: var(--color-text);
        }

        /* MODIFIED: Labs now use the same Teal color as Subjects */
        .grid-cell.lab {
            background-color: rgba(var(--color-primary-rgb), 0.15);
            color: var(--color-text);
        }

        .grid-cell.lunch,
        .grid-cell.free {
            cursor: default;
        }

        .grid-cell.lunch {
            background-color: rgba(200, 180, 50, 0.15);
            color: var(--color-text);
        }

        .grid-cell.free {
            background-color: rgba(190, 24, 93, 0.15);
            color: var(--color-text-secondary);
            font-style: italic;
        }

        .grid-cell.today {
            outline: 1px solid var(--color-primary-hover);
            outline-offset: -1px;
        }

        .grid-cell.active-period {
            box-shadow: 0 0 0 2px var(--color-primary);
            background-color: rgba(8, 145, 178, 0.15);
            color: var(--color-text);
            animation: pulse-border-bg 2s infinite, fadeInSlideUp var(--duration-slow) var(--ease-in-out) forwards;
        }

        /* Animation Keyframes */
        @keyframes fadeInSlideUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes fadeInSlideDown {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes pulse-border-bg {
            0% {
                box-shadow: 0 0 0 2px var(--color-primary), inset 0 0 20px rgba(var(--color-primary-rgb), 0.1);
            }

            50% {
                box-shadow: 0 0 0 4px rgba(var(--color-primary-rgb), 0.4), inset 0 0 30px rgba(var(--color-primary-rgb), 0.3);
            }

            100% {
                box-shadow: 0 0 0 2px var(--color-primary), inset 0 0 20px rgba(var(--color-primary-rgb), 0.1);
            }
        }

        /* Interactive Legend Styles */
        .interactive-legend {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: var(--space-12);
            margin-top: var(--space-16);
        }

        .interactive-legend .legend-item {
            display: flex;
            align-items: center;
            gap: var(--space-8);
            padding: var(--space-6) var(--space-12);
            border-radius: var(--radius-full);
            background-color: var(--color-secondary);
            font-size: var(--font-size-xs);
            font-weight: var(--font-weight-medium);
            cursor: pointer;
            transition: all var(--duration-fast) var(--ease-standard);
            border: 1px solid transparent;
        }

        .interactive-legend .legend-item:hover {
            transform: translateY(-2px);
            background-color: var(--color-surface);
            border-color: var(--color-border);
            box-shadow: var(--shadow-sm);
            color: var(--color-primary);
        }

        .interactive-legend .legend-item .color-box {
            width: 10px;
            height: 10px;
            border-radius: var(--radius-full);
            border: none;
        }

        .color-box.subject {
            background-color: rgba(var(--color-primary-rgb), 0.6);
        }

        /* MODIFIED: Labs color box also uses Teal */
        .color-box.lab {
            background-color: rgba(var(--color-primary-rgb), 0.6);
        }

        .color-box.lunch {
            background-color: rgba(200, 180, 50, 0.6);
        }

        .color-box.free {
            background-color: rgba(190, 24, 93, 0.6);
        }

        .color-box.active-period {
            background-color: rgba(8, 145, 178, 0.6);
            animation: pulse-border-bg 2s infinite;
        }

        /* Grid Cell Highlighting for Interactive Legend */
        .grid-cell.highlight-legend {
            outline: 2px solid var(--color-primary);
            transform: scale(1.05);
            box-shadow: var(--shadow-md);
            z-index: 10;
            position: relative;
        }

        /* MODAL STYLES (WITH EXIT ANIMATIONS) */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1000;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 0;
        }

        .modal.hidden {
            display: none;
        }

        .modal-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(4px);
            animation: fadeIn 0.3s var(--ease-in-out);
        }

        .modal.is-closing .modal-overlay {
            animation: fadeOut var(--duration-normal) var(--ease-in-out);
        }

        .modal-content {
            position: relative;
            background-color: var(--color-surface);
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-lg);
            border: 1px solid var(--color-border);
            max-width: 600px;
            width: 100%;
            max-height: 90vh;
            display: flex;
            flex-direction: column;
            animation: modalPopIn var(--duration-normal) var(--ease-in-out);
        }

        .modal.is-closing .modal-content {
            animation: modalPopOut var(--duration-normal) var(--ease-in-out);
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
            }

            to {
                opacity: 1;
            }
        }

        @keyframes fadeOut {
            from {
                opacity: 1;
            }

            to {
                opacity: 0;
            }
        }

        @keyframes modalPopIn {
            from {
                opacity: 0;
                transform: translateY(10px) scale(0.95);
            }

            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        @keyframes modalPopOut {
            from {
                opacity: 1;
                transform: translateY(0) scale(1);
            }

            to {
                opacity: 0;
                transform: translateY(10px) scale(0.95);
            }
        }

        .modal-header {
            padding: var(--space-20);
            border-bottom: 1px solid var(--color-border);
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-shrink: 0;
        }

        .modal-header h3 {
            font-size: var(--font-size-xl);
            color: var(--color-text);
            word-break: keep-all;
            overflow-wrap: break-word;
        }

        .modal-close {
            background: none;
            border: none;
            font-size: var(--font-size-3xl);
            color: var(--color-text-secondary);
            cursor: pointer;
            padding: 0;
            line-height: 1;
            transition: color var(--duration-fast) var(--ease-standard), transform var(--duration-normal) var(--ease-standard);
        }

        .modal-close:hover {
            color: var(--color-text);
            transform: rotate(90deg);
        }

        /* Smooth scroll and custom scrollbar for modals */
        .modal-body {
            padding: var(--space-20);
            overflow-y: auto;
            scroll-behavior: smooth;
        }

        .modal-body::-webkit-scrollbar {
            width: 8px;
        }

        .modal-body::-webkit-scrollbar-track {
            background: var(--color-secondary);
            border-radius: var(--radius-full);
        }

        .modal-body::-webkit-scrollbar-thumb {
            background-color: var(--color-primary);
            border-radius: var(--radius-full);
            border: 2px solid transparent;
            background-clip: content-box;
        }

        .modal-body::-webkit-scrollbar-thumb:hover {
            background-color: var(--color-primary-hover);
        }


        .subject-details {
            display: grid;
            gap: var(--space-12);
        }

        .detail-row {
            display: grid;
            grid-template-columns: 120px 1fr;
            gap: var(--space-16);
            padding-bottom: var(--space-12);
            border-bottom: 1px solid var(--color-border);
        }

        .detail-row:last-child {
            border-bottom: none;
        }

        .detail-label {
            font-weight: var(--font-weight-medium);
            color: var(--color-text-secondary);
            font-size: var(--font-size-sm);
        }

        .detail-value {
            font-weight: var(--font-weight-medium);
            color: var(--color-text);
            font-size: var(--font-size-sm);
            word-break: break-word;
            overflow-wrap: break-word;
        }

        /* Modal-specific styles */
        .modal-tabs {
            display: flex;
            gap: var(--space-8);
            margin-bottom: var(--space-16);
            border-bottom: 1px solid var(--color-border);
        }

        .tab-btn {
            padding: var(--space-8) var(--space-16);
            cursor: pointer;
            background: none;
            border: none;
            border-bottom: 2px solid transparent;
            color: var(--color-text-secondary);
            font-weight: var(--font-weight-medium);
            transition: color var(--duration-fast), border-bottom-color var(--duration-fast);
        }

        .tab-btn.active {
            color: var(--color-primary);
            border-bottom-color: var(--color-primary);
        }

        .student-list-container,
        #facultyListContainer {
            font-size: var(--font-size-sm);
        }

        .student-table,
        .faculty-table {
            width: 100%;
            border-collapse: collapse;
        }

        .student-table th,
        .student-table td,
        .faculty-table th,
        .faculty-table td {
            padding: var(--space-8) var(--space-12);
            text-align: left;
            border-bottom: 1px solid var(--color-border);
        }

        .student-table th,
        .faculty-table th {
            font-weight: var(--font-weight-semibold);
            background-color: var(--color-secondary);
        }

        .student-table tr:last-child td,
        .faculty-table tr:last-child td {
            border-bottom: none;
        }

        /* IMPORTANT DATES MODAL */
        @keyframes slideInUp {
            from {
                transform: translateY(40px);
                opacity: 0;
            }

            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        @keyframes slideOutDown {
            from {
                transform: translateY(0);
                opacity: 1;
            }

            to {
                transform: translateY(40px);
                opacity: 0;
            }
        }

        #importantDatesModal .modal-content {
            animation: slideInUp 0.4s var(--ease-standard);
        }

        #importantDatesModal.is-closing .modal-content {
            animation: slideOutDown 0.4s var(--ease-standard);
        }

        .dates-filter-controls {
            display: flex;
            gap: var(--space-8);
            margin-bottom: var(--space-20);
            flex-wrap: wrap;
        }

        .date-filter-btn {
            padding: var(--space-6) var(--space-12);
            border: 1px solid var(--color-border);
            background-color: var(--color-surface);
            color: var(--color-text);
            border-radius: var(--radius-full);
            cursor: pointer;
            font-size: var(--font-size-xs);
            font-weight: var(--font-weight-medium);
            transition: all var(--duration-fast);
        }

        .date-filter-btn:hover {
            background-color: var(--color-secondary-hover);
            border-color: var(--color-primary);
        }

        .date-filter-btn.active {
            background-color: var(--color-primary);
            color: var(--color-btn-primary-text);
            border-color: var(--color-primary);
        }

        .dates-list-container {
            display: flex;
            flex-direction: column;
            gap: var(--space-12);
        }

        .date-item {
            display: flex;
            align-items: center;
            gap: var(--space-16);
            padding: var(--space-12);
            background-color: var(--color-secondary);
            border-radius: var(--radius-md);
            border-left: 4px solid transparent;
            /* Animation for filtering */
            animation: dateItemFadeIn 0.4s var(--ease-in-out) backwards;
        }

        /* Animation keyframes for filtering */
        @keyframes dateItemFadeIn {
            from {
                opacity: 0;
                transform: translateX(20px);
            }

            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        @keyframes dateItemFadeOut {
            from {
                opacity: 1;
                transform: scale(1);
            }

            to {
                opacity: 0;
                transform: scale(0.95);
            }
        }

        .date-item.is-exiting {
            animation: dateItemFadeOut 0.3s var(--ease-in-out) forwards;
        }

        .date-item.type-holiday {
            border-left-color: var(--color-error);
        }

        .date-item.type-assignment {
            border-left-color: var(--color-assignment);
        }

        .date-item.type-exam {
            border-left-color: var(--color-exam);
        }


        .date-item-date {
            font-weight: var(--font-weight-semibold);
            font-size: var(--font-size-sm);
            width: 100px;
            flex-shrink: 0;
        }

        .date-item-details {
            font-size: var(--font-size-sm);
            color: var(--color-text-secondary);
        }

        .no-dates-message {
            text-align: center;
            padding: var(--space-24);
            color: var(--color-text-secondary);
            font-style: italic;
        }

        /* Footer */
        .footer {
            background-color: var(--color-surface);
            border-top: 1px solid var(--color-border);
            padding: var(--space-20) 0;
            margin-top: auto;
            animation: fadeInSlideUp 0.6s 0.6s var(--ease-in-out) both;
        }

        .footer-content {
            max-width: var(--container-xl);
            margin: 0 auto;
            padding: 0 var(--space-16);
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: var(--space-16);
            font-size: var(--font-size-sm);
            color: var(--color-text-secondary);
        }

        .footer-links {
            display: flex;
            align-items: center;
            gap: var(--space-8);
        }

        /* UPDATED FOOTER LINK STYLES */
        .footer-link {
            cursor: pointer;
            color: var(--color-text-secondary);
            text-decoration: none;
            border-bottom: none;
            padding-bottom: 2px;
            position: relative;
            transition: color var(--duration-fast), transform var(--duration-fast);
            display: inline-block;
        }

        .footer-link:hover {
            color: var(--color-text);
            transform: translateY(-2px);
        }

        .footer-link:active {
            transform: translateY(0);
        }

        .footer-link::before {
            content: "";
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 1px;
            background-image: linear-gradient(to right, var(--color-text-secondary) 50%, transparent 50%);
            background-size: 4px 1px;
            background-repeat: repeat-x;
            background-position: 0 100%;
        }

        .footer-link::after {
            content: "";
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 1px;
            background-image: linear-gradient(to right, var(--color-primary) 50%, transparent 50%);
            background-size: 4px 1px;
            background-repeat: repeat-x;
            background-position: 0 100%;
            clip-path: inset(0 100% 0 0);
            transition: clip-path 0.4s ease;
        }

        .footer-link:hover::after {
            clip-path: inset(0 0 0 0);
        }

        /* Calendar Styles */
        #dateTimeTrigger {
            cursor: pointer;
        }

        .calendar-container {
            padding: var(--space-8);
        }

        .calendar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--space-16);
        }

        .calendar-header h4 {
            font-size: var(--font-size-lg);
            color: var(--color-text);
            margin: 0;
        }

        .calendar-header button {
            background: var(--color-secondary);
            color: var(--color-text);
            border: none;
            border-radius: var(--radius-sm);
            font-weight: bold;
            cursor: pointer;
            width: 32px;
            height: 32px;
            transition: background-color var(--duration-fast), transform var(--duration-fast) var(--ease-standard);
        }

        .calendar-header button:hover {
            background: var(--color-secondary-hover);
            transform: scale(1.1);
        }

        .calendar-header button:active {
            transform: scale(0.95);
        }

        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: var(--space-4);
            text-align: center;
        }

        .calendar-grid div {
            font-size: var(--font-size-sm);
            border-radius: var(--radius-sm);
            display: flex;
            align-items: center;
            justify-content: center;
            aspect-ratio: 1 / 1;
        }

        .calendar-day-header {
            font-weight: var(--font-weight-semibold);
            color: var(--color-text-secondary);
        }

        .calendar-day {
            color: var(--color-text);
            position: relative;
            flex-direction: column;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
            padding: var(--space-4);
            gap: var(--space-4);
            transition: background-color var(--duration-fast);
        }

        .calendar-day:hover {
            background-color: var(--color-secondary-hover);
        }

        .calendar-day.current-day>span {
            background-color: var(--color-primary);
            color: var(--color-btn-primary-text);
            font-weight: var(--font-weight-bold);
            border-radius: var(--radius-full);
            width: 24px;
            height: 24px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }

        .event-dots-container {
            display: flex;
            gap: 3px;
            height: 5px;
        }

        .event-dot {
            width: 5px;
            height: 5px;
            border-radius: 50%;
            flex-shrink: 0;
        }

        .dot-holiday {
            background-color: var(--color-error);
        }

        .dot-exam {
            background-color: var(--color-exam);
        }

        .dot-assignment {
            background-color: var(--color-assignment);
        }

        /* Custom Tooltip Styles */
        .custom-tooltip {
            position: fixed;
            background-color: var(--color-charcoal-700);
            color: var(--color-cream-50);
            padding: var(--space-12);
            border-radius: var(--radius-base);
            font-size: var(--font-size-sm);
            z-index: 1001;
            pointer-events: none;
            opacity: 0;
            transform-origin: top center;
            transform: scale(0.95) translateY(10px);
            transition: opacity var(--duration-fast) ease-in-out, transform var(--duration-fast) ease-in-out;
            max-width: 280px;
            text-align: left;
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: var(--shadow-lg);
        }

        .custom-tooltip.visible {
            opacity: 1;
            transform: scale(1) translateY(0);
        }

        .custom-tooltip::after {
            content: '';
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%);
            border-width: 8px;
            border-style: solid;
            border-color: transparent transparent var(--color-charcoal-700) transparent;
        }

        .custom-tooltip.position-top {
            transform-origin: bottom center;
        }

        .custom-tooltip.position-top::after {
            top: 100%;
            bottom: auto;
            transform: translateX(-50%) rotate(180deg);
        }

        .tooltip-event-item {
            display: flex;
            flex-direction: column;
            padding-left: var(--space-12);
            border-left-width: 3px;
            border-left-style: solid;
        }

        .tooltip-event-item+.tooltip-event-item {
            margin-top: var(--space-8);
            padding-top: var(--space-8);
            border-top: 1px solid var(--color-border);
        }

        .tooltip-event-item.item-exam {
            border-left-color: var(--color-exam);
        }

        .tooltip-event-item.item-assignment {
            border-left-color: var(--color-assignment);
        }

        .tooltip-event-item.item-holiday {
            border-left-color: var(--color-error);
        }

        .tooltip-event-item strong {
            font-weight: var(--font-weight-semibold);
            margin-bottom: var(--space-2);
        }

        .tooltip-event-item span {
            font-size: var(--font-size-sm);
            color: var(--color-gray-300);
        }

        .tooltip-event-item small {
            font-size: var(--font-size-xs);
            color: var(--color-gray-400);
            margin-top: var(--space-4);
            line-height: 1.4;
        }

        [data-color-scheme="light"] .custom-tooltip {
            background-color: var(--color-slate-900);
            color: var(--color-cream-100);
            border-color: transparent;
        }

        [data-color-scheme="light"] .custom-tooltip::after {
            border-color: transparent transparent var(--color-slate-900) transparent;
        }

        [data-color-scheme="light"] .tooltip-event-item+.tooltip-event-item {
            border-top-color: rgba(255, 255, 255, 0.1);
        }

        /* SYLLABUS MODAL STYLES */
        #syllabusModal .modal-content {
            width: 100%;
            max-width: 100vw;
            height: 100%;
            max-height: 100vh;
            border-radius: 0;
            border: none;
            box-shadow: none;
            padding: 0;
            animation: slideInUpSyllabus var(--duration-slow) var(--ease-in-out);
        }

        #syllabusModal.is-closing .modal-content {
            animation: slideOutDownSyllabus var(--duration-slow) var(--ease-in-out);
        }

        @keyframes slideInUpSyllabus {
            from {
                opacity: 0;
                transform: translateY(100%);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes slideOutDownSyllabus {
            from {
                opacity: 1;
                transform: translateY(0);
            }

            to {
                opacity: 0;
                transform: translateY(100%);
            }
        }

        .syllabus-page-container {
            display: flex;
            height: 100%;
            width: 100%;
            flex-direction: column;
        }

        .syllabus-header {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: var(--space-16);
            border-bottom: 1px solid var(--color-border);
            position: relative;
            flex-shrink: 0;
        }

        .syllabus-header h3 {
            font-size: var(--font-size-xl);
            color: var(--color-text);
            word-break: keep-all;
            overflow-wrap: break-word;
        }

        .syllabus-close-btn {
            position: absolute;
            top: 50%;
            right: var(--space-16);
            transform: translateY(-50%);
            background: var(--color-secondary);
            border: none;
            color: var(--color-text);
            width: 36px;
            height: 36px;
            border-radius: var(--radius-full);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: var(--font-size-xl);
            line-height: 1;
            transition: background-color var(--duration-fast), transform var(--duration-fast);
        }

        .syllabus-close-btn:hover {
            background-color: var(--color-secondary-hover);
            transform: translateY(-50%) rotate(90deg);
        }

        .syllabus-body {
            display: flex;
            flex-grow: 1;
            overflow: hidden;
        }

        .syllabus-nav {
            width: 280px;
            flex-shrink: 0;
            border-right: 1px solid var(--color-border);
            padding: var(--space-16);
            overflow-y: auto;
        }

        .syllabus-nav-btn {
            display: block;
            width: 100%;
            text-align: left;
            padding: var(--space-12) var(--space-16);
            border-radius: var(--radius-md);
            background: none;
            border: none;
            color: var(--color-text-secondary);
            font-weight: var(--font-weight-medium);
            cursor: pointer;
            transition: background-color var(--duration-fast), color var(--duration-fast), transform var(--duration-fast) var(--ease-standard);
            margin-bottom: var(--space-4);
            white-space: nowrap;
        }

        .syllabus-nav-btn:hover {
            background-color: var(--color-secondary);
            color: var(--color-text);
            transform: translateX(4px);
        }

        .syllabus-nav-btn.active {
            background-color: var(--color-primary);
            color: var(--color-btn-primary-text);
            transform: translateX(0);
        }

        /* Custom Mobile Syllabus Dropdown */
        .syllabus-select-wrapper {
            padding: var(--space-16);
            border-bottom: 1px solid var(--color-border);
            flex-shrink: 0;
            display: none;
            /* Hidden by default */
            position: relative;
        }

        .syllabus-select-trigger {
            width: 100%;
            padding: var(--space-12);
            border-radius: var(--radius-md);
            border: 1px solid var(--color-border);
            background-color: var(--color-surface);
            color: var(--color-text);
            font-size: var(--font-size-base);
            font-weight: var(--font-weight-medium);
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: box-shadow var(--duration-fast);
        }

        .syllabus-select-trigger:focus,
        .syllabus-select-wrapper.open .syllabus-select-trigger {
            outline: none;
            border-color: var(--color-primary);
            box-shadow: 0 0 0 3px var(--color-focus-ring);
        }

        .syllabus-select-trigger .chevron {
            transition: transform var(--duration-normal) var(--ease-in-out);
        }

        .syllabus-select-wrapper.open .syllabus-select-trigger .chevron {
            transform: rotate(180deg);
        }

        .syllabus-select-options {
            position: absolute;
            top: calc(100% - 1px);
            left: var(--space-16);
            right: var(--space-16);
            background-color: var(--color-surface);
            border: 1px solid var(--color-border);
            border-top: none;
            border-radius: 0 0 var(--radius-md) var(--radius-md);
            box-shadow: var(--shadow-md);
            z-index: 10;
            max-height: 250px;
            overflow-y: auto;
            opacity: 0;
            visibility: hidden;
            transform: scaleY(0.95) translateY(-10px);
            transform-origin: top center;
            transition: all var(--duration-normal) var(--ease-in-out);
        }

        .syllabus-select-wrapper.open .syllabus-select-options {
            opacity: 1;
            visibility: visible;
            transform: scaleY(1) translateY(0);
        }

        /* Blur effect for syllabus dropdown background */
        .syllabus-details-content {
            transition: filter var(--duration-normal) ease-in-out;
        }

        .syllabus-select-wrapper.open~.syllabus-details-content {
            filter: blur(3px);
            pointer-events: none;
        }

        .syllabus-select-option {
            padding: var(--space-12);
            cursor: pointer;
            transition: background-color var(--duration-fast);
        }

        .syllabus-select-option:hover {
            background-color: var(--color-secondary-hover);
        }

        .syllabus-select-option.selected {
            background-color: var(--color-primary);
            color: var(--color-btn-primary-text);
            font-weight: var(--font-weight-semibold);
        }

        .syllabus-details-content {
            flex-grow: 1;
            padding: var(--space-32);
            overflow-y: auto;
            position: relative;
        }

        .syllabus-content {
            display: none;
        }

        .syllabus-content.active {
            display: block;
            animation: slideInRight 0.4s var(--ease-in-out);
        }

        .syllabus-content.is-exiting {
            animation: slideOutLeft 0.4s var(--ease-in-out);
            position: absolute;
            top: var(--space-32);
            left: var(--space-32);
        }

        @keyframes slideInRight {
            from {
                opacity: 0;
                transform: translateX(20px);
            }

            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        @keyframes slideOutLeft {
            from {
                opacity: 1;
                transform: translateX(0);
            }

            to {
                opacity: 0;
                transform: translateX(-20px);
            }
        }

        .syllabus-content h4 {
            font-size: var(--font-size-2xl);
            margin-bottom: var(--space-12);
            color: var(--color-primary);
            padding-bottom: var(--space-8);
            border-bottom: 1px solid var(--color-border);
            word-break: keep-all;
            overflow-wrap: break-word;
        }

        .syllabus-content h5 {
            font-size: var(--font-size-lg);
            font-weight: var(--font-weight-semibold);
            margin-top: var(--space-24);
            margin-bottom: var(--space-12);
            word-break: keep-all;
            overflow-wrap: break-word;
        }

        .syllabus-content p {
            margin-bottom: var(--space-16);
            line-height: 1.7;
            word-break: break-word;
            overflow-wrap: break-word;
        }

        .syllabus-content ol {
            padding-left: var(--space-20);
        }

        .syllabus-content li {
            margin-bottom: var(--space-12);
            animation: staggerItemIn 0.5s var(--ease-standard) both;
            word-break: break-word;
            overflow-wrap: break-word;
        }

        @keyframes staggerItemIn {
            from {
                opacity: 0;
                transform: translateY(15px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .syllabus-table {
            width: 100%;
            border-collapse: collapse;
            margin: var(--space-24) 0;
            font-size: var(--font-size-sm);
            display: block;
            overflow-x: auto;
        }

        .syllabus-table th,
        .syllabus-table td {
            padding: var(--space-12);
            text-align: left;
            border: 1px solid var(--color-border);
            word-break: break-word;
            overflow-wrap: break-word;
            white-space: normal;
        }

        .syllabus-table th {
            font-weight: var(--font-weight-semibold);
            background-color: var(--color-secondary);
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .header-content {
                flex-wrap: wrap;
                align-items: center;
                row-gap: var(--space-12);
            }

            .university-info {
                order: 1;
                flex-grow: 1;
            }

            .header-controls {
                display: contents;
            }

            .current-time {
                order: 2;
            }

            .header-icons {
                order: 3;
                width: 100%;
                justify-content: center;
            }

            .university-name {
                font-size: var(--font-size-lg);
            }

            .program-details {
                display: none;
            }

            .time-display {
                font-size: var(--font-size-base);
            }

            .date-display {
                font-size: var(--font-size-xs);
            }

            .timetable-grid {
                grid-template-columns: minmax(60px, auto) repeat(5, minmax(80px, 1fr));
                font-size: var(--font-size-xs);
            }

            .grid-cell {
                min-height: 40px;
                padding: var(--space-4);
            }

            .footer-content {
                flex-direction: column;
                text-align: center;
            }

            .modal-content:not(#syllabusModal .modal-content) {
                margin: var(--space-16);
                max-width: calc(100vw - 32px);
                max-height: calc(100vh - 32px);
            }

            .detail-row {
                grid-template-columns: 100px 1fr;
            }

            .syllabus-body {
                flex-direction: column;
            }

            .syllabus-nav {
                display: none;
            }

            .syllabus-select-wrapper {
                display: block;
            }

            .syllabus-details-content {
                padding: var(--space-24);
            }
        }

        @media (max-width: 480px) {
            .timetable-grid {
                grid-template-columns: minmax(50px, auto) repeat(5, minmax(60px, 1fr));
                padding: var(--space-8);
                gap: var(--space-1);
            }

            .grid-header,
            .grid-time {
                padding: var(--space-6);
                font-size: 10px;
            }

            .grid-cell {
                min-height: 36px;
                padding: var(--space-2);
                font-size: 10px;
            }

            .date-item {
                flex-direction: column;
                align-items: flex-start;
                gap: var(--space-8);
            }

            /* Mobile legend size reduction */
            .interactive-legend {
                gap: var(--space-8);
            }

            .interactive-legend .legend-item {
                font-size: 11px;
                gap: var(--space-6);
                padding: var(--space-4) var(--space-8);
            }

            .interactive-legend .color-box {
                width: 8px;
                height: 8px;
            }
        }
    </style>
</head>

<body>
    <div class="app-container">
        <header class="header">
            <div class="header-content">
                <div class="university-info">
                    <h1 class="university-name">SRM University</h1>
                    <div class="program-details">
                        <span class="program">BCA Semester IV, Section B</span>
                        <span class="separator"></span>
                        <span class="room">Room: A-403</span>
                        <span class="separator"></span>
                        <span class="session">Session: 2026 (Even Semester)</span>
                    </div>
                </div>
                <div class="header-controls">
                    <div class="header-icons">
                        <button class="theme-toggle" id="themeToggle" title="Toggle light/dark theme">
                            <svg class="sun-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                                viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                                stroke-linecap="round" stroke-linejoin="round">
                                <circle cx="12" cy="12" r="5"></circle>
                                <line x1="12" y1="1" x2="12" y2="3"></line>
                                <line x1="12" y1="21" x2="12" y2="23"></line>
                                <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                                <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                                <line x1="1" y1="12" x2="3" y2="12"></line>
                                <line x1="21" y1="12" x2="23" y2="12"></line>
                                <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                                <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                            </svg>
                            <svg class="moon-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24"
                                viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                                stroke-linecap="round" stroke-linejoin="round">
                                <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                            </svg>
                        </button>
                        <button class="theme-toggle" id="calendarToggle" title="Open academic calendar">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round">
                                <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
                                <line x1="16" y1="2" x2="16" y2="6"></line>
                                <line x1="8" y1="2" x2="8" y2="6"></line>
                                <line x1="3" y1="10" x2="21" y2="10"></line>
                            </svg>
                        </button>
                    </div>
                    <div class="current-time" id="dateTimeTrigger">
                        <div class="time-display" id="currentTime">10:15:31 PM</div>
                        <div class="date-display" id="currentDate">Wednesday, Aug 20, 2025</div>
                    </div>
                </div>
            </div>
        </header>

        <div class="custom-tooltip" id="customTooltip"></div>

        <main class="main-content">
            <div class="timetable-container">
                <div class="timetable-header">
                    <h2>Weekly Timetable</h2>
                    <div class="teacher-info">
                        <a href="#" id="totalStudentsLink" class="footer-link">Students: 79</a>
                        <span class="separator"></span>
                        <a href="#" id="viewFacultyLink" class="footer-link">Faculty</a>
                        <span class="separator"></span>
                        <a href="#" id="syllabusLink" class="footer-link">Syllabus</a>
                        <span class="separator"></span>
                        <a href="#" id="importantDatesLink" class="footer-link">Important Dates</a>
                        <span class="separator"></span>
                        <a href="https://erpsrm.com/srmhonline/studentportal/loginManager/youLogin.jsp" target="_blank"
                            class="footer-link">ERP</a>
                    </div>
                    <div class="interactive-legend">
                        <div class="legend-item" data-type="subject">
                            <div class="color-box subject"></div>
                            <span>Regular</span>
                        </div>
                        <div class="legend-item" data-type="lab">
                            <div class="color-box lab"></div>
                            <span>Lab</span>
                        </div>
                        <div class="legend-item" data-type="lunch">
                            <div class="color-box lunch"></div>
                            <span>Lunch</span>
                        </div>
                        <div class="legend-item" data-type="free">
                            <div class="color-box free"></div>
                            <span>Free</span>
                        </div>
                        <div class="legend-item" data-type="active-period">
                            <div class="color-box active-period"></div>
                            <span>Current</span>
                        </div>
                    </div>
                </div>

                <div class="timetable-main-area">
                    <div class="timetable-grid" id="timetableGrid">
                    </div>
                </div>
            </div>
        </main>

        <div class="modal hidden" id="subjectModal">
            <div class="modal-overlay"></div>
            <div class="modal-content">
                <div class="modal-header">
                    <h3 id="modalTitle">Subject Details</h3>
                    <button class="modal-close">&times;</button>
                </div>
                <div class="modal-body">
                    <div class="subject-details">
                        <div class="detail-row"><span class="detail-label">Subject:</span><span class="detail-value"
                                id="subjectName"></span></div>
                        <div class="detail-row"><span class="detail-label">Code:</span><span class="detail-value"
                                id="subjectCode"></span></div>
                        <div class="detail-row"><span class="detail-label">Faculty:</span><span class="detail-value"
                                id="subjectFaculty"></span></div>
                        <div class="detail-row"><span class="detail-label">Department:</span><span class="detail-value"
                                id="subjectDepartment"></span></div>
                        <div class="detail-row"><span class="detail-label">Time:</span><span class="detail-value"
                                id="subjectTime"></span></div>
                        <div class="detail-row"><span class="detail-label">Day:</span><span class="detail-value"
                                id="subjectDay"></span></div>
                    </div>
                </div>
            </div>
        </div>

        <div class="modal hidden" id="studentModal">
            <div class="modal-overlay"></div>
            <div class="modal-content">
                <div class="modal-header">
                    <h3>Student List</h3>
                    <button class="modal-close">&times;</button>
                </div>
                <div class="modal-body">
                    <div class="modal-tabs">
                        <button class="tab-btn active" data-section="B">Section B</button>
                        <button class="tab-btn" data-section="A">Section A</button>
                    </div>
                    <div class="student-list-container" id="studentListContainer">
                    </div>
                </div>
            </div>
        </div>

        <div class="modal hidden" id="facultyModal">
            <div class="modal-overlay"></div>
            <div class="modal-content">
                <div class="modal-header">
                    <h3>Faculty List</h3>
                    <button class="modal-close">&times;</button>
                </div>
                <div class="modal-body" id="facultyListContainer">
                </div>
            </div>
        </div>

        <div class="modal hidden" id="aboutMeModal">
            <div class="modal-overlay"></div>
            <div class="modal-content">
                <div class="modal-header">
                    <h3>About Me</h3>
                    <button class="modal-close">&times;</button>
                </div>
                <div class="modal-body">
                    <div class="subject-details" id="aboutMeContainer">
                    </div>
                </div>
            </div>
        </div>

        <div class="modal hidden" id="calendarModal">
            <div class="modal-overlay"></div>
            <div class="modal-content">
                <div class="modal-header">
                    <h3 id="monthYearHeader">Academic Calendar</h3>
                    <button class="modal-close">&times;</button>
                </div>
                <div class="modal-body">
                    <div class="calendar-container">
                        <div class="calendar-header">
                            <button id="prevMonthBtn">&lt;</button>
                            <h4 id="calendarTitle"></h4>
                            <button id="nextMonthBtn">&gt;</button>
                        </div>
                        <div class="calendar-grid" id="calendarGrid">
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="modal hidden" id="syllabusModal">
            <div class="modal-overlay"></div>
            <div class="modal-content">
            </div>
        </div>

        <div class="modal hidden" id="importantDatesModal">
            <div class="modal-overlay"></div>
            <div class="modal-content">
                <div class="modal-header">
                    <h3>Important Dates</h3>
                    <button class="modal-close">&times;</button>
                </div>
                <div class="modal-body">
                    <div class="dates-filter-controls" id="datesFilterControls">
                        <button class="date-filter-btn active" data-filter="all">All</button>
                        <button class="date-filter-btn" data-filter="holiday">Holidays</button>
                        <button class="date-filter-btn" data-filter="assignment">Assignments</button>
                        <button class="date-filter-btn" data-filter="exam">Exams</button>
                    </div>
                    <div class="dates-list-container" id="datesListContainer">
                    </div>
                </div>
            </div>
        </div>

        <footer class="footer">
            <div class="footer-content">
                <div class="info">
                    <a href="#" id="madeByLink" class="footer-link">Made by: Mohammad Ahsan Neyaz</a>
                </div>
                <div class="footer-links">
                    <span>Class In-Charge: Ms. Arul</span>
                    <span class="separator"></span>
                    <span>Program Coordinator: Dr. Neeraj Dahiya</span>
                </div>
            </div>
        </footer>
    </div>

    <script>
        // Timetable data and application logic
        const studentDataA = [
            { no: 1, reg: "42224210001", name: "SAMEER GOSWAMI" }, { no: 2, reg: "42224210002", name: "AKSHAY" },
            { no: 3, reg: "42224210003", name: "KRISHNA KHANDELWAL" }, { no: 4, reg: "42224210004", name: "RONIT CHUGH" },
            { no: 5, reg: "42224210005", name: "MILAN DHAMA" }, { no: 6, reg: "42224210006", name: "SNEHA SHARMA" },
            { no: 7, reg: "42224210007", name: "TANYA BEHL" }, { no: 8, reg: "42224210008", name: "UDIT PANDEY" },
            { no: 9, reg: "42224210009", name: "MANAV ARYA" }, { no: 10, reg: "42224210010", name: "SHUBHAM DANGI" },
            { no: 11, reg: "42224210011", name: "SHIVANK DANGI" }, { no: 12, reg: "42224210012", name: "TEESHA ARORA" },
            { no: 13, reg: "42224210013", name: "ROSHAN SHARMA" }, { no: 14, reg: "42224210014", name: "SAGAR SHARMA" },
            { no: 15, reg: "42224210015", name: "SAAD" }, { no: 16, reg: "42224210016", name: "VINEET DHAMA" },
            { no: 17, reg: "42224210017", name: "SAMEER" }, { no: 18, reg: "42224210018", name: "ANISHA" },
            { no: 19, reg: "42224210019", name: "RISHABH" }, { no: 20, reg: "42224210020", name: "MUSKAN" },
            { no: 21, reg: "42224210021", name: "MEHAK" }, { no: 22, reg: "42224210022", name: "ANSH GAUTAM" },
            { no: 23, reg: "42224210023", name: "DAKSH DAHIYA" }, { no: 24, reg: "42224210024", name: "ASHWANI" },
            { no: 25, reg: "42224210025", name: "PARAS" }, { no: 26, reg: "42224210026", name: "Tanuj Phougat" },
            { no: 27, reg: "42224210027", name: "KRISH" }, { no: 28, reg: "42224210028", name: "ANUSH" },
            { no: 29, reg: "42224210029", name: "YASH" }, { no: 30, reg: "42224210030", name: "DIVYANSHU" },
            { no: 31, reg: "42224210031", name: "MOHIT NAIN" }, { no: 32, reg: "42224210032", name: "ISHA" },
            { no: 33, reg: "42224210033", name: "NIRBHAY CHAUHAN" }, { no: 34, reg: "42224210034", name: "VANSH KHATRI" },
            { no: 35, reg: "42224210035", name: "DEEPAK ROHILLA" }, { no: 36, reg: "42224210036", name: "KESHAR SHARMA" },
            { no: 37, reg: "42224210037", name: "SUSHANT" }, { no: 38, reg: "42224210038", name: "YASH" },
            { no: 39, reg: "42224210039", name: "VIPUL KUMAR" }, { no: 40, reg: "42224210040", name: "SHORYA KHAIWAL" },
            { no: 41, reg: "42224210041", name: "MOHAMMAD SHAHID" }, { no: 42, reg: "42224210042", name: "HARSH KUMAR" },
            { no: 43, reg: "42224210043", name: "JAY KUMAR" }, { no: 44, reg: "42224210044", name: "TUSHAR ANTIL" },
            { no: 45, reg: "42224210045", name: "KHUSHI CHAUHAN" }, { no: 46, reg: "42224210046", name: "KUNAL" },
            { no: 47, reg: "42224210047", name: "NIDHI CHAUHAN" }, { no: 48, reg: "42224210048", name: "PARWATI" },
            { no: 49, reg: "42224210049", name: "SASHAKT YADAV" }, { no: 50, reg: "42224210050", name: "MAYANK" },
            { no: 51, reg: "42224210051", name: "ASHUTOSH KARN" }, { no: 52, reg: "42224210052", name: "YASH TYAGI" },
            { no: 53, reg: "42224210053", name: "KISHAN SINGH" }, { no: 54, reg: "42224210054", name: "DEV KUMAR" },
            { no: 55, reg: "42224210055", name: "ALISH DHAMA" }, { no: 56, reg: "42224210056", name: "ATUL" },
            { no: 57, reg: "42224210057", name: "KARTIK" }, { no: 58, reg: "42224210058", name: "KUSHAGRA SINGH RAUTELA" },
            { no: 59, reg: "42224210059", name: "RITIK" }, { no: 60, reg: "42224210060", name: "RISHAV KUMAR" },
            { no: 61, reg: "42224210061", name: "DISHA" }, { no: 62, reg: "42224210062", name: "TUSHAR" },
            { no: 63, reg: "42224210063", name: "SAKET SWAMI" }, { no: 64, reg: "42224210064", name: "HARSHITA NANDAL" },
            { no: 65, reg: "42224210065", name: "PRIYA" }, { no: 66, reg: "42224210066", name: "SANCHI BANSAL" },
            { no: 67, reg: "42224210067", name: "RAGHAV" }, { no: 68, reg: "42224210068", name: "SHITIZ TYAGI" },
            { no: 69, reg: "42224210069", name: "TANISHQ NANDAL" }, { no: 70, reg: "42224210070", name: "YASH RAJ" },
            { no: 71, reg: "42224210071", name: "TANVI" }, { no: 72, reg: "42224210072", name: "DIVYANSHU VERMA" },
            { no: 73, reg: "42224210073", name: "SARTHI" }, { no: 74, reg: "42224210074", name: "YATHARTH GARG" },
            { no: 75, reg: "42224210075", name: "MOHIT JOSHI" }
        ];

        const studentDataB = [
            { no: 1, name: "AYSHA PANDA", reg: "42224210076" }, { no: 2, name: "TUSHAR", reg: "42224210077" },
            { no: 3, name: "KHUSHBOO", reg: "42224210078" }, { no: 4, name: "BHUMI VAID", reg: "42224210079" },
            { no: 5, name: "ANIRUDH JINDAL", reg: "42224210080" }, { no: 6, name: "KUNAL", reg: "42224210081" },
            { no: 7, name: "GAURAV SHARMA", reg: "42224210082" }, { no: 8, name: "ANURADHA GARG", reg: "42224210083" },
            { no: 9, name: "DAKSH", reg: "42224210084" }, { no: 10, name: "LAKSHAY .", reg: "42224210085" },
            { no: 11, name: "DEEPANSHU", reg: "42224210086" }, { no: 12, name: "LOVENISH CHAUHAN", reg: "42224210087" },
            { no: 13, name: "VANSHUL SHARMA", reg: "42224210088" }, { no: 14, name: "ABHISHEK", reg: "42224210089" },
            { no: 15, name: "KRISH KUMAR", reg: "42224210090" }, { no: 16, name: "KARTIKAY DUTT SHARMA", reg: "42224210091" },
            { no: 17, name: "PARINEETA", reg: "42224210092" }, { no: 18, name: "SHUBHAM", reg: "42224210093" },
            { no: 19, name: "MAHIR", reg: "42224210094" }, { no: 20, name: "KHUSHBU CHAUHAN", reg: "42224210095" },
            { no: 21, name: "HARSHIT SOLANKI", reg: "42224210096" }, { no: 22, name: "YASH", reg: "42224210097" },
            { no: 23, name: "VANSH KUMAR", reg: "42224210098" }, { no: 24, name: "ANANT GAUR", reg: "42224210099" },
            { no: 25, name: "ISHANT", reg: "42224210100" }, { no: 26, name: "JATIN LOHCHAB", reg: "42224210101" },
            { no: 27, name: "AKHIL", reg: "42224210102" }, { no: 28, name: "LAKSHAY", reg: "42224210103" },
            { no: 29, name: "KUSHAGAR SINGH", reg: "42224210104" }, { no: 30, name: "HARSHIT", reg: "42224210105" },
            { no: 31, name: "MOHINI", reg: "42224210106" }, { no: 32, name: "HIMANSHU KUMAR", reg: "42224210107" },
            { no: 33, name: "KHUSHI", reg: "42224210108" }, { no: 34, name: "TANISH SHARMA", reg: "42224210109" },
            { no: 35, name: "HUNNY", reg: "42224210110" }, { no: 36, name: "VANSH TYAGI", reg: "42224210111" },
            { no: 37, name: "MOHAMMAD AHSAN NEYAZ", reg: "42224210112" }, { no: 38, name: "VIVEK", reg: "42224210113" },
            { no: 39, name: "BHOOMI", reg: "42224210114" }, { no: 40, name: "MANAV DESWAL .", reg: "42224210115" },
            { no: 41, name: "SHUBHANSHU SAINI", reg: "42224210116" }, { no: 42, name: "PRATIK KUMAR JHA", reg: "42224210117" },
            { no: 43, name: "DAKSH YADAV", reg: "42224210118" }, { no: 44, name: "PIYUSH PAL", reg: "42224210119" },
            { no: 45, name: "VANSH", reg: "42224210120" }, { no: 46, name: "TARUN KHATRI .", reg: "42224210121" },
            { no: 47, name: "HARSH GOYAL", reg: "42224210122" }, { no: 48, name: "ADITYA", reg: "42224210123" },
            { no: 49, name: "RAHUL KUMAR", reg: "42224210124" }, { no: 50, name: "NISHU", reg: "42224210125" },
            { no: 51, name: "IBRAHEEM QAISER BHAT", reg: "42224210126" }, { no: 52, name: "RITIK", reg: "42224210127" },
            { no: 53, name: "STEPHEN WILLIAM", reg: "42224210128" }, { no: 54, name: "PRASHANT PAL", reg: "42224210129" },
            { no: 55, name: "Kunal Rajpal", reg: "42224210130" }, { no: 56, name: "KUSH CHAUHAN", reg: "42224210131" },
            { no: 57, name: "JAI", reg: "42224210132" }, { no: 58, name: "AKSHAT JAIN", reg: "42224210133" },
            { no: 59, name: "DAKSH BALYAN", reg: "42224210134" }, { no: 60, name: "AYUSH", reg: "42224210135" },
            { no: 61, name: "CHIRAG", reg: "42224210136" }, { no: 62, name: "VANSH SHOKEEN", reg: "42224210137" },
            { no: 63, name: "SAKSHI", reg: "42224210138" }, { no: 64, name: "MANAN GULATI", reg: "42224210139" },
            { no: 65, name: "Ayush ", reg: "42224210140" }, { no: 66, name: "TUSHAR GILL", reg: "42224210141" },
            { no: 67, name: "RAHUL", reg: "42224210142" }, { no: 68, name: "RISHIT KHURANA", reg: "42224210143" },
            { no: 69, name: "PRATHAM ", reg: "42224210144" }, { no: 70, name: "ARYAN KUMAR", reg: "42224210145" },
            { no: 71, name: "Yash", reg: "42224210146" }, { no: 72, name: "Ayush", reg: "42224210147" },
            { no: 73, name: "Gautam", reg: "42224210148" }, { no: 74, name: "Shekhar", reg: "42224210149" },
            { no: 75, name: "Chehak ", reg: "42224210150" }, { no: 76, name: "Hardik ", reg: "42224210151" },
            { no: 77, name: "Jaswant", reg: "42224210152" }, { no: 78, name: "Pooja Jat", reg: "42224210153" },
            { no: 79, name: "ADITYA", reg: "42224210154" }
        ];

        const aboutMeData = {
            "Name": "Mohammad Ahsan Neyaz",
            "Reg. No.": "42224210112",
            "Age": "21",
            "Course": "Bachelor of Computer Applications (B.C.A.), 4th Semester",
            "Section": "4B",
            "Location": "India",
            "Motto": '"Work smart. Stay consistent. Always Keep growing."'
        };

        const timetableData = {
            "timetable": {
                "MONDAY": { "9:30-10:30": "Web Technologies", "10:30-11:30": "Computer Multimedia & Animation", "11:30-12:30": "AI & ML", "12:30-1:30": "German-II/French-II", "1:30-2:30": "LUNCH", "2:30-3:30": "Software Engineering", "3:30-4:30": "Fundamental of E-commerce" },
                "TUESDAY": { "9:30-10:30": "Software Engineering", "10:30-11:30": "Computer Multimedia & Animation", "11:30-12:30": "Professional Skills", "12:30-1:30": "Live Project/Vacational", "1:30-2:30": "LUNCH", "2:30-3:30": "R Lang (G1) / Multi M (G2)", "3:30-4:30": "R Lang (G1) / Multi M (G2)" },
                "WEDNESDAY": { "9:30-10:30": "Web Technologies", "10:30-11:30": "Live Project/Vacational", "11:30-12:30": "LUNCH", "12:30-1:30": "MultiM (G1) / WT (G2)", "1:30-2:30": "MultiM (G1) / WT (G2)", "2:30-3:30": "Free", "3:30-4:30": "Fundamental of E-commerce" },
                "THURSDAY": { "9:30-10:30": "Software Engineering", "10:30-11:30": "Fundamental of E-commerce", "11:30-12:30": "Professional Skills", "12:30-1:30": "LUNCH", "1:30-2:30": "Web Technologies", "2:30-3:30": "Computer Multimedia & Animation", "3:30-4:30": "Free" },
                "FRIDAY": { "9:30-10:30": "AI & ML", "10:30-11:30": "R Lang (G2) / WT (G1)", "11:30-12:30": "R Lang (G2) / WT (G1)", "12:30-1:30": "German-II/French-II", "1:30-2:30": "LUNCH", "2:30-3:30": "Fundamental of E-commerce", "3:30-4:30": "Software Engineering" }
            },
            "subjects": {
                "Web Technologies": { "code": "24BCA401", "name": "Web Technologies (WT)", "abbrev": "WT", "faculty": "Dr. Kaleem", "department": "CSE" },
                "Computer Multimedia & Animation": { "code": "24BCA402", "name": "Computer Multimedia & Animation (MA)", "abbrev": "CM&A", "faculty": "Dr. Syed", "department": "CSE" },
                "Software Engineering": { "code": "23BCA403", "name": "Software Engineering (SE)", "abbrev": "SE", "faculty": "Dr. Indu", "department": "CSE" },
                "Fundamental of E-commerce": { "code": "23BCA404", "name": "Fundamental of E-commerce (E Comm)", "abbrev": "E-Comm", "faculty": "Dr. Pawan", "department": "Management" },
                "AI & ML": { "code": "23VACxxx", "name": "AI & ML", "abbrev": "AI/ML", "faculty": "Dr. Dilshad", "department": "CSE" },
                "German-II/French-II": { "code": "23UAEC 401", "name": "German-II/French-II", "abbrev": "Lang", "faculty": "TBA", "department": "LANGUAGE" },
                "Professional Skills": { "code": "21SS454", "name": "Professional Skills (PS)", "abbrev": "PS", "faculty": "Mr. Kulvinder Singh", "department": "PD" },
                "Live Project/Vacational": { "code": "23BCA 407", "name": "Live Project - III/Vacational Courses / Summer Internship", "abbrev": "Project", "faculty": "Ms. Arul", "department": "CSE" },
                "R Lang (G1) / Multi M (G2)": { "code": "23SS404 / 23BCA405", "name": "R Language (G1) / Multimedia Lab (G2)", "abbrev": "R/MM Lab", "faculty": "Dr. Syamsunder / Dr. Syed", "department": "Math / CSE" },
                "MultiM (G1) / WT (G2)": { "code": "23BCA405 / 23BCA406", "name": "Multimedia Lab (G1) / Web Tech Lab (G2)", "abbrev": "MM/WT Lab", "faculty": "Dr. Syed / Dr. Kaleem", "department": "CSE" },
                "R Lang (G2) / WT (G1)": { "code": "23SS404 / 23BCA406", "name": "R Language (G2) / Web Tech Lab (G1)", "abbrev": "R/WT Lab", "faculty": "Dr. Syamsunder / Dr. Kaleem", "department": "Math / CSE" }
            },
            "timeSlots": ["9:30-10:30", "10:30-11:30", "11:30-12:30", "12:30-1:30", "1:30-2:30", "2:30-3:30", "3:30-4:30"],
            "days": ["MONDAY", "TUESDAY", "WEDNESDAY", "THURSDAY", "FRIDAY"]
        };

        const syllabusData = {
            "Computer Multimedia & Animation": `
                <h4>Unit-1: INTRODUCTION</h4>
                <p>Introduction to multimedia, Key elements of multimedia: text, audio, video, graphics, animation,Hardware and software requirements for multimedia Applications of multimedia, Introduction to Animation -History of Animation-Types of Animation - Basic Principles of Animation</p>
                <h4>Unit-2: DESKTOP PUBLISHING</h4>
                <p>Desktop publishing- Basic design concepts, User interface design, Hypermedia authoring concept, Photoshop, Coral Draw, and PageMaker.</p>
                <h4>Unit-3: MULTIMEDIA PRODUCTION</h4>
                <p>Process of multimedia production. Various file formats of text, audio, video, graphics, and animation. File compression techniques, creating web-based multimedia, Social Media Production, Digital Presenting, Video Studio Production.</p>
                <h4>Unit-4: KIOSKS</h4>
                <p>Multimedia-based presentations, Concept of interactive learning material, Multimedia networks: retail and banking business, Application in interactive television, Types of kiosks</p>
                <h4>Unit-5: CONCEPT GENERATION OF MULTIMEDIA</h4>
                <p>Concept generation of multimedia, Project process and stages of multimedia production, Implementation and distribution of multimedia products.</p>
            `,
            "Fundamental of E-commerce": `
                <h4>Unit-1</h4>
                <p>E-commerce: The revolution is just beginning, Ecommerce: A Brief History, Understanding E-commerce.</p>
                <h4>Unit-2</h4>
                <p>E-commerce Business Models, B2C, B2B, Business models in emerging E-commerce areas, How the Internet and the web change business: strategy, structure and process</p>
                <h4>Unit-3</h4>
                <p>Building an E-commerce Web Site: A systematic Approach, The e-commerce security environment, Security threats in the e-commerce environment</p>
                <h4>Unit-4</h4>
                <p>Business Models: Evolution of Internet Business Models, Business Models in Practice, Business Model: The Six Components, Security in Electronic Business</p>
                <h4>Unit-5</h4>
                <p>Encryption-Cryptography, Encryption, Digital Signature, E-Payment Systems: B2B Electronic Payments, Third-Party Payment Processing, Electronic Payment Gateway</p>
            `,
            "Multimedia & Animation Lab": `
                <h4>COURSE LEARNING OUTCOMES (CLOs)</h4>
                <p>After completion of course, students would be able to:
                <ol>
                    <li>Students will demonstrate proficiency in using multimedia software tools like Photoshop, Flash, and Dreamweaver to create and edit multimedia content.</li>
                    <li>Students will be able to design and develop functional websites incorporating multimedia elements such as images, videos, and animations.</li>
                    <li>Students will apply multimedia concepts to design and develop interactive games, understanding the basics of game design and user engagement.</li>
                    <li>Students will explore and illustrate the use of multimedia in different fields, creating projects that show its application in education, business, and communication.</li>
                    <li>Students will complete projects that simulate real-world scenarios, demonstrating their ability to apply multimedia tools and concepts to practical problems and scenarios.</li>
                </ol></p>
                <h4>LIST OF EXPERIMENT</h4>
                <ol>
                    <li>01. To study MULTIMEDIA HARDWARE tools and also they can interact with multimedia practically.</li>
                    <li>02. To study the Multimedia BASIC SOFTWARE tools and also they can interact with multimedia practically.</li>
                    <li>03. Design a poster for the 2024 election and show the difference in resolution and quality for Print and Web.</li>
                    <li>04. Implement different software tools of multimedia like Photoshop, flash, and Dreamweaver.</li>
                    <li>05. Write a program to show a bitmap image on your computer screen.</li>
                    <li>06. Write a program to produce animation effects of a triangle transforming into a square and then into a circle.</li>
                    <li>07. Design the scenery of a park using different tools of Photoshop.</li>
                    <li>08. Take images from different image sources to show variation in Resolution.</li>
                    <li>09. Use Effective Cropping Techniques to design a collage.</li>
                    <li>10. Design a scenery showing correction of Image tonality.</li>
                </ol>
            `,
            "Web Technologies": `
                <h4>Unit-1: Introduction to Internet</h4>
                <p>Internet Principles- Basic Web Concepts - Client/Server model Internet  Protocols and Application. Introduction to Internet and World Wide Web; Evolution and History of World Wide Web; Basic features; Web Browsers; Web Servers; Hypertext Transfer Protocol, Overview of TCP/IP and its services; URLs; Searching and Web Casting Techniques; Search Engines and Search Tools.</p>
                <h4>Unit-2: Fundamentals of Web:</h4>
                <p>Fundamentals of Web: Internet, WWW, Web Browsers and Web Servers, URLs, MIME, HTTP, Security, the Web Programmers Toolbox. Introduction to XHTML: Origins and evolution of HTML and XHTML, Basic syntax, Standard XHTML Document structure, Basic text mark-up, Images, Hypertext Links, Lists, Tables, Forms, Frames, Syntactic differences between HTML and XHTML.</p>
                <h4>Unit-3: CSS and JAVASCRIPT</h4>
                <p>CSS: Cascading Style Sheet: HTML CSS-Inline styles- creating style sheets with the style elements- Building a web page. Java Script: Introduction to scripting-operators: logical- Increment and decrement operators- control structures. Client and Server Side Programming in java script.</p>
                <h4>Unit-4: Hosting Site and Service</h4>
                <p>Hosting your Site; Internet Service Provider; Web terminologies, Phases of Planning and designing your Web Site; Steps for developing your Site; Choosing the contents; Home Page; Domain Names, Front page views, Adding pictures, Links, Backgrounds.</p>
                <h4>Unit-5: Introduction to XML</h4>
                <p>XML-XML overview-features-HTML XML-processing instructions-application of XMLCOMMENTS-XML names space - schema-Document Type Definition (DTD)  Extensible style language (XSL).</p>
            `,
            "Software Engineering": `
                <h4>Syllabus Content</h4>
                <p>Syllabus details for Software Engineering will be updated soon.</p>
            `,
            "Web Thechnologies Lab": `
                <h4>List Of Experiments</h4>
                <p><ol>
                    <li>01. Develop a HTML document, which displays your name as heading and displays any four of your friends. Each of your friend's names must appear as hot text. When you click your friend's name, it must open another HTML document, which tells about your friend.</li>
                    <li>02. Write names of several countries in a paragraph and store it as an HTML document, world. Html. Each country name must be a hot text. When you click India (for example), it must open india.html and it should provide a brief introduction about India.</li>
                    <li>03. Design a HTML document describing you. Assign a suitable background design and background color and a text color.</li>
                    <li>04. Develop a Complete Web Page using Frames and Framesets which gives the Information about a Hospital using HTML.</li>
                    <li>05. Develop complete set of web pages to describe your skills in various areas using HTML.</li>
                    <li>06. Develop a web site to publish your family and the details of each member-using HTML</li>
                    <li>07. Develop and demonstrate the usage of inline, internal and external style sheet using CSS.</li>
                    <li>08. Write an HTML page that contains a selection box with a list of 5 countries. When the user selects a country, its capital should be printed next in the list. Add CSS to customize the properties of the font of the capital (color,bold and font size).</li>
                    <li>09. Develop and demonstrate JavaScript with POP-UP boxes and functions for the following problems: a) Input: Click on Display Date button using onclick( ) function Output: Display date in the textbox b) Input: A number n obtained using prompt Output: Factorial of n number using alert c) Input: A number n obtained using prompt Output: A multiplication table of numbers from 1 to 10 of n using alert d) Input: A number n obtained using prompt and add another number using confirm Output: Sum of the entire n numbers using alert.</li>
                    <li>10. Create an XML document that contains 10 users information. Write a Java Program, which takes User Id as input and returns the user details by taking the user information from XML document using DOM parser or SAX parser.</li>
                    </ol></p>
            `,
            "German": `
                <h4>UNIT-1</h4>
                <p><ol>
                    <li>Zeitangabe, Tageszeit, Uhrzeit, der Tagesablauf</li>
                    <li>Prpositionen mit Akkusativ, Ordinalzahlen</li>
                    <li>Wegbeschreibung, die Himmelsrichtungen</li>
                    <li>Die	Gebude, Verkehrsmittel</li>
                </ol></p>
                <h4>UNIT-2</h4>
                <p><ol>
                    <li>Das	Haus</li>
                    <li>Modalverben</li>
                    <li>Essen und Trinken, Messeinheiten, Einkaufen</li>  
                    <li>Krperteile	und	Krankheiten</li>
                    <li>Futur</li>  
                </ol></p>
                <h4>UNIT-3</h4>
                <p><ol>
                    <li>Dativ, Artikel und Personalpronomen im Dativ</li> 
                    <li>Prpositionen mit Dativ, die Wechselprpositionen</li> 
                    <li>Possessiv-Artikel, die Konnektoren</li> 
                    <li>Schreiben Teil 1</li> 
                    <li>Trennbare Verben</li>   
                </ol></p>
                <h4>UNIT-4</h4>
                <p><ol>
                    <li>Schreiben Teil 2 (E- Mail Schreiben)</li>
                    <li>Perfekt</li>
                    <li>Vergangenheit erzhlen, Das Wochenende, Lebenslauf</li>
                </ol></p>
            `
        };


        const academicEvents = {
            // --- HOLIDAYS ---
            "2026-01-01": [{ type: "holiday", remarks: "New Year Day / Semester Break" }],
            "2026-01-18": [{ type: "holiday", remarks: "Semester Break End" }],
            "2026-01-23": [{ type: "holiday", remarks: "Sir Chhotu Ram Jayanti / Basant Panchami" }],
            "2026-01-26": [{ type: "holiday", remarks: "Republic Day" }],
            "2026-03-03": [{ type: "holiday", remarks: "Holi" }],
            "2026-03-23": [{ type: "holiday", remarks: "Shaheedi Diwas of Bhagat Singh, Rajguru, Sukhdev" }],
            "2026-03-26": [{ type: "holiday", remarks: "Ram Navami" }],
            "2026-03-31": [{ type: "holiday", remarks: "Mahavir Jayanti" }],
            "2026-04-03": [{ type: "holiday", remarks: "Good Friday" }],
            "2026-04-14": [{ type: "holiday", remarks: "Dr. B.R. Ambedkar Jayanti / Vaisakhi" }],
            "2026-05-01": [{ type: "holiday", remarks: "Buddha Purnima" }],
            "2026-05-27": [{ type: "holiday", remarks: "Id-Ul-Zuha (Bakrid)" }],
            "2026-06-17": [{ type: "holiday", remarks: "Maharana Pratap Jayanti" }],
            "2026-06-26": [{ type: "holiday", remarks: "Muharram" }],
            "2026-06-29": [{ type: "holiday", remarks: "Sant Kabir Jayanti" }],
            "2026-07-31": [{ type: "holiday", remarks: "Shaheed Udham Singh Martyrdom Day" }],
            "2026-08-26": [{ type: "holiday", remarks: "Milad-un-Nabi / Id-e-Milad" }],
            "2026-08-28": [{ type: "holiday", remarks: "Raksha Bandhan" }],
            "2026-09-04": [{ type: "holiday", remarks: "Janmashtami" }],
            "2026-09-23": [{ type: "holiday", remarks: "Shaheed Diwas of Rao Tula Ram" }],
            "2026-10-02": [{ type: "holiday", remarks: "Mahatma Gandhi Jayanti" }],
            "2026-10-20": [{ type: "holiday", remarks: "Dussehra" }],
            "2026-10-26": [{ type: "holiday", remarks: "Maharishi Valmiki Jayanti" }],
            "2026-11-09": [{ type: "holiday", remarks: "Vishvakarma Day / Goverdhan Puja" }],
            "2026-11-24": [{ type: "holiday", remarks: "Guru Nanak Dev Jayanti" }],
            "2026-12-25": [{ type: "holiday", remarks: "Christmas" }],
        };

        let cal_current_date = new Date();
        let cal_current_month = cal_current_date.getMonth();
        let cal_current_year = cal_current_date.getFullYear();

        document.addEventListener('DOMContentLoaded', function () {
            function initTheme() {
                const themeToggle = document.getElementById('themeToggle');
                const savedTheme = localStorage.getItem('theme') || 'dark';
                document.documentElement.setAttribute('data-color-scheme', savedTheme);
                document.documentElement.style.setProperty('--color-surface-rgb', savedTheme === 'dark' ? '38, 40, 40' : '255, 255, 253');

                themeToggle.addEventListener('click', function () {
                    var currentTheme = document.documentElement.getAttribute('data-color-scheme');
                    var newTheme = currentTheme === 'dark' ? 'light' : 'dark';
                    document.documentElement.setAttribute('data-color-scheme', newTheme);
                    localStorage.setItem('theme', newTheme);
                    document.documentElement.style.setProperty('--color-surface-rgb', newTheme === 'dark' ? '38, 40, 40' : '255, 255, 253');
                });
            }

            function getCurrentDay() {
                const days = ['SUNDAY', 'MONDAY', 'TUESDAY', 'WEDNESDAY', 'THURSDAY', 'FRIDAY', 'SATURDAY'];
                return days[new Date().getDay()];
            }

            function updateDateTime() {
                const now = new Date();
                const dateOptions = { weekday: 'long', year: 'numeric', month: 'short', day: 'numeric' };
                const hours = now.getHours();
                const minutes = now.getMinutes();
                const seconds = now.getSeconds();
                const displayHours = hours % 12 || 12;
                const displayMinutes = minutes < 10 ? '0' + minutes : minutes;
                const displaySeconds = seconds < 10 ? '0' + seconds : seconds;
                const ampm = hours >= 12 ? 'PM' : 'AM';
                document.getElementById('currentTime').innerHTML =
                    `${displayHours}:${displayMinutes}<span class="time-seconds">:${displaySeconds}</span> ${ampm}`;
                document.getElementById('currentDate').textContent = now.toLocaleDateString('en-US', dateOptions);
            }

            function generateTimetable() {
                const grid = document.getElementById('timetableGrid');
                if (!grid) return;
                grid.innerHTML = '';
                grid.appendChild(Object.assign(document.createElement('div'), { className: 'grid-header', textContent: 'Time/Day' }));
                timetableData.days.forEach(function (day) {
                    grid.appendChild(Object.assign(document.createElement('div'), { className: 'grid-header', textContent: formatDayName(day) }));
                });

                let cellIndex = 0;

                timetableData.timeSlots.forEach(function (timeSlot) {
                    grid.appendChild(Object.assign(document.createElement('div'), { className: 'grid-time', textContent: timeSlot }));
                    timetableData.days.forEach(function (day) {
                        const subject = timetableData.timetable[day] && timetableData.timetable[day][timeSlot];
                        const cell = document.createElement('div');
                        cell.className = 'grid-cell';

                        cell.style.setProperty('--cell-delay', `${cellIndex * 15}ms`);
                        cellIndex++;

                        let cellText = subject || 'FREE';

                        // Updated Logic: Check for mobile width and use abbreviation
                        if (subject && window.innerWidth < 768) {
                            const subjectDetails = timetableData.subjects[subject];
                            if (subjectDetails) {
                                // Priority 1: Use explicit abbreviation
                                if (subjectDetails.abbrev) {
                                    cellText = subjectDetails.abbrev;
                                }
                                // Priority 2: Use text inside parenthesis (fallback)
                                else {
                                    const match = subjectDetails.name.match(/\(([^)]+)\)$/);
                                    if (match) {
                                        cellText = match[1];
                                    }
                                }
                            }
                        }

                        cell.textContent = cellText;
                        cell.setAttribute('data-subject', subject || 'FREE');
                        cell.setAttribute('data-time', timeSlot);
                        cell.setAttribute('data-day', day);
                        if (subject === 'LUNCH') {
                            cell.classList.add('lunch');
                        } else if (!subject || subject === 'FREE' || subject === 'Free') {
                            cell.classList.add('free');
                        } else {
                            // Simple check for Lab in the subject name
                            cell.classList.add((subject.indexOf('Lab') > -1 || subject.indexOf('LAB') > -1 || subject.includes('/')) ? 'lab' : 'subject');
                            cell.addEventListener('click', function () {
                                showModal('subjectModal', { subject: subject, timeSlot: timeSlot, day: day });
                            });
                        }
                        if (day === getCurrentDay()) {
                            cell.classList.add('today');
                        }
                        grid.appendChild(cell);
                    });
                });
            }

            function formatDayName(day) {
                return day.charAt(0) + day.slice(1).toLowerCase();
            }

            function showModal(modalId, data) {
                const modal = document.getElementById(modalId);
                if (!modal) return;
                modal.classList.remove('is-closing');
                populateModalContent(modalId, data);
                modal.classList.remove('hidden');
                document.body.style.overflow = 'hidden';
            }

            function hideModal(modalElement) {
                if (!modalElement || modalElement.classList.contains('hidden')) return;

                modalElement.classList.add('is-closing');

                modalElement.addEventListener('animationend', () => {
                    modalElement.classList.add('hidden');
                    modalElement.classList.remove('is-closing');
                    if (!document.querySelector('.modal:not(.hidden)')) {
                        document.body.style.overflow = 'auto';
                    }
                }, { once: true });
            }

            function populateModalContent(modalId, data) {
                if (modalId === 'subjectModal') {
                    const subjectInfo = timetableData.subjects[data.subject];
                    if (!subjectInfo) return;
                    document.getElementById('modalTitle').textContent = subjectInfo.name;
                    document.getElementById('subjectName').textContent = subjectInfo.name;
                    document.getElementById('subjectCode').textContent = subjectInfo.code;
                    document.getElementById('subjectFaculty').textContent = subjectInfo.faculty;
                    document.getElementById('subjectDepartment').textContent = subjectInfo.department;
                    document.getElementById('subjectTime').textContent = data.timeSlot;
                    document.getElementById('subjectDay').textContent = formatDayName(data.day);
                } else if (modalId === 'studentModal') {
                    renderStudentList('B');
                } else if (modalId === 'facultyModal') {
                    renderFacultyList();
                } else if (modalId === 'aboutMeModal') {
                    const container = document.getElementById('aboutMeContainer');
                    container.innerHTML = '';
                    for (const key in aboutMeData) {
                        if (Object.hasOwnProperty.call(aboutMeData, key)) {
                            container.innerHTML += `<div class="detail-row"><span class="detail-label">${key}</span><span class="detail-value">${aboutMeData[key]}</span></div>`;
                        }
                    }
                } else if (modalId === 'calendarModal') {
                    renderCalendar();
                } else if (modalId === 'syllabusModal') {
                    renderSyllabus();
                } else if (modalId === 'importantDatesModal') {
                    renderImportantDates('all');
                }
            }

            function renderSyllabus() {
                const modalContent = document.querySelector('#syllabusModal .modal-content');
                const subjects = Object.keys(syllabusData);
                let navHTML = '';

                if (window.innerWidth <= 768) {
                    const firstSubject = subjects[0];
                    navHTML = `
                        <div class="syllabus-select-wrapper" id="customSyllabusSelect">
                            <button class="syllabus-select-trigger" aria-haspopup="listbox" aria-expanded="false">
                                <span class="selected-value">${firstSubject}</span>
                                <span class="chevron">
                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg>
                                </span>
                            </button>
                            <div class="syllabus-select-options" role="listbox">
                    `;
                    subjects.forEach((subject, index) => {
                        navHTML += `<div class="syllabus-select-option ${index === 0 ? 'selected' : ''}" data-value="${subject}" role="option">${subject}</div>`;
                    });
                    navHTML += `</div></div>`;
                } else {
                    navHTML += `<nav class="syllabus-nav">`;
                    subjects.forEach((subject, index) => {
                        navHTML += `<button class="syllabus-nav-btn ${index === 0 ? 'active' : ''}" data-subject="${subject}">${subject}</button>`;
                    });
                    navHTML += `</nav>`;
                }

                let contentHTML = '';
                subjects.forEach((subject, index) => {
                    contentHTML += `<div class="syllabus-content ${index === 0 ? 'active' : ''}" data-subject-content="${subject}">${syllabusData[subject]}</div>`;
                });

                const pageHTML = `
                    <div class="syllabus-page-container">
                        <header class="syllabus-header">
                            <h3>Syllabus</h3>
                            <button class="syllabus-close-btn">&times;</button>
                        </header>
                        <div class="syllabus-body">
                            ${navHTML}
                            <main class="syllabus-details-content">
                                ${contentHTML}
                            </main>
                        </div>
                    </div>`;

                modalContent.innerHTML = pageHTML;

                const contentArea = modalContent.querySelector('.syllabus-details-content');

                const switchTab = (subject) => {
                    const currentlyActive = contentArea.querySelector('.syllabus-content.active');
                    const newActive = contentArea.querySelector(`.syllabus-content[data-subject-content="${subject}"]`);
                    if (currentlyActive === newActive) return;
                    if (currentlyActive) {
                        currentlyActive.classList.add('is-exiting');
                        currentlyActive.addEventListener('animationend', () => {
                            currentlyActive.classList.remove('active', 'is-exiting');
                            newActive.classList.add('active');
                            newActive.querySelectorAll('li').forEach((li, index) => {
                                li.style.animationDelay = `${index * 50}ms`;
                            });
                        }, { once: true });
                    } else {
                        newActive.classList.add('active');
                        newActive.querySelectorAll('li').forEach((li, index) => {
                            li.style.animationDelay = `${index * 50}ms`;
                        });
                    }
                };

                modalContent.querySelector('.syllabus-close-btn').addEventListener('click', () => {
                    hideModal(document.getElementById('syllabusModal'));
                });

                if (window.innerWidth <= 768) {
                    const wrapper = modalContent.querySelector('#customSyllabusSelect');
                    const trigger = wrapper.querySelector('.syllabus-select-trigger');
                    const selectedValue = wrapper.querySelector('.selected-value');
                    const options = wrapper.querySelectorAll('.syllabus-select-option');

                    const toggleDropdown = () => {
                        wrapper.classList.toggle('open');
                        trigger.setAttribute('aria-expanded', wrapper.classList.contains('open'));
                    };

                    trigger.addEventListener('click', toggleDropdown);

                    options.forEach(option => {
                        option.addEventListener('click', () => {
                            const value = option.dataset.value;
                            selectedValue.textContent = value;
                            options.forEach(opt => opt.classList.remove('selected'));
                            option.classList.add('selected');
                            switchTab(value);
                            toggleDropdown();
                        });
                    });

                    document.addEventListener('click', (e) => {
                        if (wrapper.classList.contains('open') && !wrapper.contains(e.target)) {
                            toggleDropdown();
                        }
                    }, { capture: true });

                } else {
                    const navContainer = modalContent.querySelector('.syllabus-nav');
                    navContainer.addEventListener('click', (e) => {
                        if (e.target.matches('.syllabus-nav-btn')) {
                            const subject = e.target.dataset.subject;
                            navContainer.querySelectorAll('.syllabus-nav-btn').forEach(btn => btn.classList.remove('active'));
                            e.target.classList.add('active');
                            switchTab(subject);
                        }
                    });
                }

                const firstActiveContent = modalContent.querySelector('.syllabus-content.active');
                if (firstActiveContent) {
                    firstActiveContent.querySelectorAll('li').forEach((li, index) => {
                        li.style.animationDelay = `${index * 50}ms`;
                    });
                }
            }


            function renderStudentList(section) {
                const container = document.getElementById('studentListContainer');
                const data = section === 'A' ? studentDataA : studentDataB;
                var tableHTML = `<table class="student-table"><thead><tr><th>Sl.No.</th><th>Name</th><th>Register No.</th></tr></thead><tbody>`;
                data.forEach(function (s) {
                    tableHTML += `<tr><td>${s.no}</td><td>${s.name}</td><td>${s.reg}</td></tr>`;
                });
                tableHTML += `</tbody></table>`;
                container.innerHTML = tableHTML;
                document.querySelectorAll('#studentModal .tab-btn').forEach(function (btn) {
                    btn.classList.toggle('active', btn.getAttribute('data-section') === section);
                });
            }

            function renderFacultyList() {
                const container = document.getElementById('facultyListContainer');
                const facultyList = [];
                const uniqueFaculty = {};
                Object.keys(timetableData.subjects).forEach(function (key) {
                    var subject = timetableData.subjects[key];
                    if (subject.faculty !== 'TBA' && subject.faculty !== 'NF-A' && !uniqueFaculty[subject.faculty]) {
                        uniqueFaculty[subject.faculty] = { name: subject.faculty, department: subject.department, subjects: [] };
                    }
                });
                Object.keys(timetableData.subjects).forEach(function (key) {
                    var subject = timetableData.subjects[key];
                    if (uniqueFaculty[subject.faculty]) {
                        uniqueFaculty[subject.faculty].subjects.push(subject.name.replace(/\s*\(.*\)\s*$/, ''));
                    }
                });
                for (var name in uniqueFaculty) {
                    facultyList.push(uniqueFaculty[name]);
                }
                facultyList.sort((a, b) => a.name.localeCompare(b.name));
                var tableHTML = `<table class="faculty-table"><thead><tr><th>Faculty Name</th><th>Department</th><th>Subject(s)</th></tr></thead><tbody>`;
                facultyList.forEach(function (f) {
                    tableHTML += `<tr><td>${f.name}</td><td>${f.department}</td><td>${f.subjects.join(', ')}</td></tr>`;
                });
                tableHTML += `</tbody></table>`;
                container.innerHTML = tableHTML;
            }

            function renderCalendar() {
                const monthNames = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];
                document.getElementById('calendarTitle').textContent = `${monthNames[cal_current_month]} ${cal_current_year}`;
                const firstDay = new Date(cal_current_year, cal_current_month, 1).getDay();
                const daysInMonth = new Date(cal_current_year, cal_current_month + 1, 0).getDate();
                const calendarGrid = document.getElementById('calendarGrid');
                calendarGrid.innerHTML = '';
                ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'].forEach(day => {
                    calendarGrid.innerHTML += `<div class="calendar-day-header">${day}</div>`;
                });
                for (let i = 0; i < firstDay; i++) {
                    calendarGrid.innerHTML += `<div></div>`;
                }
                for (let day = 1; day <= daysInMonth; day++) {
                    const dayEl = document.createElement('div');
                    dayEl.classList.add('calendar-day');
                    const dayContent = document.createElement('span');
                    dayContent.textContent = day;
                    dayEl.appendChild(dayContent);

                    const dateKey = `${cal_current_year}-${String(cal_current_month + 1).padStart(2, '0')}-${String(day).padStart(2, '0')}`;
                    const events = academicEvents[dateKey];

                    if (events && events.length > 0) {
                        const dotContainer = document.createElement('div');
                        dotContainer.className = 'event-dots-container';
                        const eventTypes = new Set(events.map(e => e.type));

                        let tooltipHTML = '';

                        eventTypes.forEach(type => {
                            const dot = document.createElement('div');
                            dot.className = `event-dot dot-${type}`;
                            dotContainer.appendChild(dot);
                        });

                        events.forEach(event => {
                            tooltipHTML += `<div class="tooltip-event-item item-${event.type}">`;
                            if (event.type === 'exam') {
                                tooltipHTML += `<strong>${event.name || 'Exam'}</strong>`;
                                if (event.subject) tooltipHTML += `<span>${event.subject} (${event.time})</span>`;
                                if (event.remarks) tooltipHTML += `<small>Topics: ${event.remarks}</small>`;
                            } else if (event.type === 'assignment') {
                                tooltipHTML += `<strong>Assignment Due</strong>`;
                                tooltipHTML += `<span>${event.subject}</span>`;
                                tooltipHTML += `<small>Task: ${event.remarks}</small>`;
                            } else if (event.type === 'holiday') {
                                tooltipHTML += `<strong>Holiday</strong>`;
                                tooltipHTML += `<span>${event.remarks}</span>`;
                            }
                            tooltipHTML += `</div>`;
                        });

                        dayEl.appendChild(dotContainer);
                        dayEl.dataset.tooltipHtml = tooltipHTML;
                    }
                    if (day === new Date().getDate() && cal_current_month === new Date().getMonth() && cal_current_year === new Date().getFullYear()) {
                        dayEl.classList.add('current-day');
                    }
                    calendarGrid.appendChild(dayEl);
                }
            }

            function renderImportantDates(filter = 'all') {
                const container = document.getElementById('datesListContainer');
                const existingItems = container.querySelectorAll('.date-item');

                existingItems.forEach(item => {
                    item.classList.add('is-exiting');
                });

                setTimeout(() => {
                    const allEvents = [];
                    Object.keys(academicEvents).forEach(dateStr => {
                        academicEvents[dateStr].forEach(event => {
                            if (filter === 'all' || event.type === filter) {
                                allEvents.push({ date: new Date(dateStr + 'T00:00:00'), ...event });
                            }
                        });
                    });

                    allEvents.sort((a, b) => a.date - b.date);

                    if (allEvents.length === 0) {
                        container.innerHTML = `<div class="no-dates-message">No dates found for this category.</div>`;
                        return;
                    }

                    let html = '';
                    allEvents.forEach(event => {
                        const dateOptions = { month: 'short', day: 'numeric', year: 'numeric' };
                        const formattedDate = event.date.toLocaleDateString('en-US', dateOptions);
                        let detailsHTML = '';
                        if (event.type === 'exam') {
                            detailsHTML = `<strong>${event.name || 'Exam'}</strong>: ${event.subject ? event.subject + ' - ' : ''} ${event.remarks || ''}`;
                        } else if (event.type === 'assignment') {
                            detailsHTML = `<strong>Assignment:</strong> ${event.subject} - ${event.remarks || ''}`;
                        } else {
                            detailsHTML = event.remarks || 'No details';
                        }

                        html += `
                        <div class="date-item type-${event.type}">
                            <div class="date-item-date">${formattedDate}</div>
                            <div class="date-item-details">${detailsHTML}</div>
                        </div>
                    `;
                    });

                    container.innerHTML = html;

                    const newItems = container.querySelectorAll('.date-item');
                    newItems.forEach((item, index) => {
                        item.style.animationDelay = `${index * 50}ms`;
                    });
                }, 200);
            }

            function bindCalendarEvents() {
                const tooltip = document.getElementById('customTooltip');
                const calendarGrid = document.getElementById('calendarGrid');
                const calendarModal = document.getElementById('calendarModal');
                let activeTooltipTarget = null;

                function showTooltip(target) {
                    if (!target.dataset.tooltipHtml) return;

                    tooltip.innerHTML = target.dataset.tooltipHtml;
                    tooltip.classList.remove('position-top', 'visible');

                    tooltip.style.visibility = 'hidden';
                    tooltip.style.display = 'block';
                    const tooltipHeight = tooltip.offsetHeight;
                    tooltip.style.display = '';
                    tooltip.style.visibility = '';

                    const rect = target.getBoundingClientRect();

                    if ((rect.bottom + tooltipHeight + 20) > window.innerHeight) {
                        tooltip.style.top = `${rect.top - tooltipHeight - 12}px`;
                        tooltip.classList.add('position-top');
                    } else {
                        tooltip.style.top = `${rect.bottom + 12}px`;
                    }

                    tooltip.style.left = `${rect.left + rect.width / 2}px`;
                    tooltip.style.transform = 'translateX(-50%)';
                    tooltip.classList.add('visible');
                    activeTooltipTarget = target;
                }

                function hideTooltip() {
                    tooltip.classList.remove('visible');
                    activeTooltipTarget = null;
                }

                calendarGrid.addEventListener('click', (e) => {
                    const target = e.target.closest('.calendar-day[data-tooltip-html]');
                    if (target) {
                        if (activeTooltipTarget === target) {
                            hideTooltip();
                        } else {
                            showTooltip(target);
                        }
                    }
                });

                calendarModal.addEventListener('click', (e) => {
                    if (!e.target.closest('.calendar-grid')) {
                        hideTooltip();
                    }
                });

                document.getElementById('dateTimeTrigger').addEventListener('click', function () {
                    showModal('calendarModal');
                });
                document.getElementById('prevMonthBtn').addEventListener('click', () => {
                    cal_current_month--;
                    if (cal_current_month < 0) {
                        cal_current_month = 11;
                        cal_current_year--;
                    }
                    renderCalendar();
                });
                document.getElementById('nextMonthBtn').addEventListener('click', () => {
                    cal_current_month++;
                    if (cal_current_month > 11) {
                        cal_current_month = 0;
                        cal_current_year++;
                    }
                    renderCalendar();
                });
            }

            function bindModalEvents() {
                document.querySelectorAll('.modal').forEach(function (modal) {
                    const closeBtn = modal.querySelector('.modal-close, .syllabus-close-btn');
                    const overlay = modal.querySelector('.modal-overlay');

                    if (closeBtn) {
                        closeBtn.addEventListener('click', () => hideModal(modal));
                    }
                    if (overlay) {
                        overlay.addEventListener('click', () => hideModal(modal));
                    }
                });

                document.addEventListener('keydown', function (e) {
                    if (e.key === 'Escape') {
                        document.querySelectorAll('.modal:not(.hidden)').forEach(hideModal);
                    }
                });

                const studentModalTabs = document.querySelector('#studentModal .modal-tabs');
                if (studentModalTabs) {
                    studentModalTabs.addEventListener('click', function (e) {
                        if (e.target && e.target.matches('.tab-btn')) {
                            renderStudentList(e.target.getAttribute('data-section'));
                        }
                    });
                }

                const datesFilterControls = document.getElementById('datesFilterControls');
                if (datesFilterControls) {
                    datesFilterControls.addEventListener('click', (e) => {
                        if (e.target.matches('.date-filter-btn')) {
                            const filter = e.target.dataset.filter;
                            document.querySelectorAll('#datesFilterControls .date-filter-btn').forEach(btn => btn.classList.remove('active'));
                            e.target.classList.add('active');
                            renderImportantDates(filter);
                        }
                    });
                }
            }


            function bindFooterLinks() {
                document.getElementById('totalStudentsLink').addEventListener('click', function (e) {
                    e.preventDefault();
                    showModal('studentModal');
                });
                document.getElementById('madeByLink').addEventListener('click', function (e) {
                    e.preventDefault();
                    showModal('aboutMeModal');
                });
                document.getElementById('viewFacultyLink').addEventListener('click', function (e) {
                    e.preventDefault();
                    showModal('facultyModal');
                });
                document.getElementById('calendarToggle').addEventListener('click', function () {
                    showModal('calendarModal');
                });
                document.getElementById('syllabusLink').addEventListener('click', function (e) {
                    e.preventDefault();
                    showModal('syllabusModal');
                });
                document.getElementById('importantDatesLink').addEventListener('click', function (e) {
                    e.preventDefault();
                    showModal('importantDatesModal');
                });
            }

            function highlightCurrentPeriod() {
                const now = new Date();
                const currentDay = getCurrentDay();
                if (currentDay === 'SATURDAY' || currentDay === 'SUNDAY') return;
                const currentHours = now.getHours();
                const currentMinutes = now.getMinutes();
                const timeSlots = timetableData.timeSlots;
                let activeSlot = null;
                for (let i = 0; i < timeSlots.length; i++) {
                    const slot = timeSlots[i];
                    const [startTime, endTime] = slot.split('-');
                    const [startHour, startMinute] = startTime.split(':').map(Number);
                    const [endHour, endMinute] = endTime.split(':').map(Number);
                    const currentTotalMinutes = currentHours * 60 + currentMinutes;
                    const startTotalMinutes = startHour * 60 + startMinute;
                    const endTotalMinutes = endHour * 60 + endMinute;
                    if (currentTotalMinutes >= startTotalMinutes && currentTotalMinutes < endTotalMinutes) {
                        activeSlot = slot;
                        break;
                    }
                }
                if (!activeSlot) return;
                const activeCells = document.querySelectorAll(`.grid-cell[data-day="${currentDay}"][data-time="${activeSlot}"]`);
                activeCells.forEach(cell => {
                    cell.classList.add('active-period');
                });
            }

            function bindInteractiveLegendEvents() {
                const legendItems = document.querySelectorAll('.interactive-legend .legend-item');
                if (!legendItems.length) return;

                legendItems.forEach(item => {
                    const type = item.dataset.type;
                    if (!type) return;

                    const targetSelector = `.grid-cell.${type}`;

                    item.addEventListener('mouseover', () => {
                        document.querySelectorAll(targetSelector).forEach(cell => {
                            cell.classList.add('highlight-legend');
                        });
                    });

                    item.addEventListener('mouseout', () => {
                        document.querySelectorAll(targetSelector).forEach(cell => {
                            cell.classList.remove('highlight-legend');
                        });
                    });
                });
            }

            function init() {
                initTheme();
                generateTimetable();
                updateDateTime();
                setInterval(updateDateTime, 1000);
                bindModalEvents();
                bindFooterLinks();
                highlightCurrentPeriod();
                renderCalendar();
                bindCalendarEvents();
                bindInteractiveLegendEvents();
            }

            // ADDED: Resize Listener for Mobile Abbreviation
            let resizeTimer;
            window.addEventListener('resize', () => {
                clearTimeout(resizeTimer);
                // Debounce: wait 200ms after resizing stops before regenerating
                resizeTimer = setTimeout(() => {
                    generateTimetable();
                    // Re-highlight current period after regeneration
                    highlightCurrentPeriod();
                }, 200);
            });

            init();
        });
    </script>
</body>

</html>


